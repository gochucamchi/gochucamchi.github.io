<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <h1>#MainActivity</h1>
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">  1
    2
    3
    4
    5
    6
    7
    8
    9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">package</span> com<span style="color: #333333">.</span><span style="color: #0000CC">example</span><span style="color: #333333">.</span><span style="color: #0000CC">raphab</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">androidx.appcompat.app.AppCompatActivity</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.Context</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.Intent</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.SharedPreferences</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.os.Bundle</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.os.Handler</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.util.TypedValue</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.view.View</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.view.ViewGroup</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.Button</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.ImageButton</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.TextView</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.Toast</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.DefaultRetryPolicy</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.Request</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.RequestQueue</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.Response</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.VolleyError</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.toolbox.JsonObjectRequest</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.toolbox.Volley</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">org.json.JSONException</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">org.json.JSONObject</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">MainActivity</span> <span style="color: #008800; font-weight: bold">extends</span> AppCompatActivity
<span style="color: #333333">{</span>
    TextView Logo_name<span style="color: #333333">;</span>
    ImageButton product_reg_btn<span style="color: #333333">;</span>
    ImageButton AS_receipt_btn<span style="color: #333333">;</span>
    ImageButton my_list_btn<span style="color: #333333">;</span>
    ImageButton Setting_btn<span style="color: #333333">;</span>
    Button login_btn<span style="color: #333333">;</span>
    ImageButton led_test<span style="color: #333333">;</span>
    <span style="color: #888888">//Button ble_test;</span>
    <span style="color: #333399; font-weight: bold">boolean</span> login_verification_check<span style="color: #333333">;</span> <span style="color: #888888">// varification_check로 LOGIN_VERIFICATION함수로 검증한 로그인 검증 결과가 나온다.</span>
    Handler handler <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Handler<span style="color: #333333">();</span>
    SharedPreferences sharedPreferences<span style="color: #333333">;</span>
    <span style="color: #333399; font-weight: bold">boolean</span> autologin<span style="color: #333333">;</span>
    <span style="color: #555555; font-weight: bold">@Override</span>
    <span style="color: #008800; font-weight: bold">protected</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onCreate</span><span style="color: #333333">(</span>Bundle savedInstanceState<span style="color: #333333">)</span>
    <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">.</span><span style="color: #0000CC">onCreate</span><span style="color: #333333">(</span>savedInstanceState<span style="color: #333333">);</span>
        setContentView<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">layout</span><span style="color: #333333">.</span><span style="color: #0000CC">activity_main</span><span style="color: #333333">);</span>
        init<span style="color: #333333">();</span>

        sharedPreferences <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPref&quot;</span><span style="color: #333333">,</span> MODE_PRIVATE<span style="color: #333333">);</span>
        autologin <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">getBoolean</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;auto_login&quot;</span><span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">);</span> <span style="color: #888888">// auto_login 값 가져오기</span>

        Login_verification<span style="color: #333333">();</span> <span style="color: #888888">// 로그인 검증 코드</span>

<span style="color: #888888">//       제품 등록 버튼</span>
        product_reg_btn<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span>
        <span style="color: #333333">{</span><span style="color: #888888">//버튼을 눌렀을 때</span>
            <span style="color: #555555; font-weight: bold">@Override</span>
            <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span>
            <span style="color: #333333">{</span>
                <span style="color: #008800; font-weight: bold">if</span><span style="color: #333333">(</span>login_verification_check <span style="color: #333333">==</span> <span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">)</span>
                <span style="color: #333333">{</span>
                    Intent intent <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Intent<span style="color: #333333">(</span>MainActivity<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">,</span> product_registration_qrcode<span style="color: #333333">.</span><span style="color: #0000CC">class</span><span style="color: #333333">);</span>
                    startActivity<span style="color: #333333">(</span>intent<span style="color: #333333">);</span><span style="color: #888888">//자바 동작을 메인 액티비티에서 제품 등록 qr코드로 바꿔라 -&gt; 이후 제품등록 qr코드 자바코드가 돌아가면 자동으로 xml을 실행하는 구조</span>
                <span style="color: #333333">}</span>
                <span style="color: #008800; font-weight: bold">else</span>
                <span style="color: #333333">{</span>
                    Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span>getApplicationContext<span style="color: #333333">(),</span> <span style="background-color: #fff0f0">&quot;로그인을 해 주세요.&quot;</span><span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
                <span style="color: #333333">}</span>
            <span style="color: #333333">}</span><span style="color: #888888">//startactivity 함수로 실행</span>
        <span style="color: #333333">});</span>

        <span style="color: #888888">//AS 접수</span>
        AS_receipt_btn<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span>
        <span style="color: #333333">{</span>
            <span style="color: #555555; font-weight: bold">@Override</span>
            <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span>
            <span style="color: #333333">{</span>
                Intent intent <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Intent<span style="color: #333333">(</span>MainActivity<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">,</span> As_receipt<span style="color: #333333">.</span><span style="color: #0000CC">class</span> <span style="color: #333333">);</span>
                startActivity<span style="color: #333333">(</span>intent<span style="color: #333333">);</span><span style="color: #888888">//</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">});</span>

<span style="color: #888888">//        //my_list</span>
<span style="color: #888888">//        my_list_btn.setOnClickListener(new View.OnClickListener()</span>
<span style="color: #888888">//        {</span>
<span style="color: #888888">//            @Override</span>
<span style="color: #888888">//            public void onClick(View view)</span>
<span style="color: #888888">//            {</span>
<span style="color: #888888">//                Intent intent = new Intent(MainActivity.this, My_List.class );</span>
<span style="color: #888888">//                startActivity(intent);//</span>
<span style="color: #888888">//            }</span>
<span style="color: #888888">//        });</span>

        <span style="color: #888888">//SETTING</span>
        Setting_btn<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span>
        <span style="color: #333333">{</span>
            <span style="color: #555555; font-weight: bold">@Override</span>
            <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span>
            <span style="color: #333333">{</span>
                Intent intent <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Intent<span style="color: #333333">(</span>MainActivity<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">,</span> Setting<span style="color: #333333">.</span><span style="color: #0000CC">class</span> <span style="color: #333333">);</span>
                startActivity<span style="color: #333333">(</span>intent<span style="color: #333333">);</span><span style="color: #888888">//</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">});</span>


        <span style="color: #888888">//로그인 버튼</span>
        login_btn<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span>
        <span style="color: #333333">{</span>
            <span style="color: #555555; font-weight: bold">@Override</span>
            <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span>
            <span style="color: #333333">{</span>
                Intent intent <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Intent<span style="color: #333333">(</span>MainActivity<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">,</span> Login<span style="color: #333333">.</span><span style="color: #0000CC">class</span><span style="color: #333333">);</span>
                startActivity<span style="color: #333333">(</span>intent<span style="color: #333333">);</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">});</span>

        <span style="color: #888888">//led test</span>
        led_test<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
            <span style="color: #555555; font-weight: bold">@Override</span>
            <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                Intent intent <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Intent<span style="color: #333333">(</span>MainActivity<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">,</span> Use_Enable_Setting<span style="color: #333333">.</span><span style="color: #0000CC">class</span><span style="color: #333333">);</span>
                startActivity<span style="color: #333333">(</span>intent<span style="color: #333333">);</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">});</span>

<span style="color: #888888">//        //led test</span>
<span style="color: #888888">//        ble_test.setOnClickListener(new View.OnClickListener() {</span>
<span style="color: #888888">//            @Override</span>
<span style="color: #888888">//            public void onClick(View view) {</span>
<span style="color: #888888">//                Intent intent = new Intent(MainActivity.this, bluetooth_test.class);</span>
<span style="color: #888888">//                startActivity(intent);</span>
<span style="color: #888888">//            }</span>
<span style="color: #888888">//        });</span>

        login_btn<span style="color: #333333">.</span><span style="color: #0000CC">setVisibility</span><span style="color: #333333">(</span>View<span style="color: #333333">.</span><span style="color: #0000CC">GONE</span><span style="color: #333333">);</span>
        <span style="color: #888888">//로그인 버튼 숨김 처리 코드</span>
        handler<span style="color: #333333">.</span><span style="color: #0000CC">postDelayed</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> Runnable<span style="color: #333333">()</span> <span style="color: #333333">{</span>
            <span style="color: #555555; font-weight: bold">@Override</span>
            <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">run</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
                <span style="color: #888888">// 딜레이 후에 실행할 코드를 여기에 작성</span>
                <span style="color: #888888">// 예: 로그인 검증 및 버튼 가시성 조절</span>
                <span style="color: #888888">//로그인</span>
                <span style="color: #008800; font-weight: bold">if</span><span style="color: #333333">(</span>login_verification_check <span style="color: #333333">==</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">)</span><span style="color: #888888">//만약에 로그인이 되어 있다면 로그인 버튼이 보이지 않게 설정</span>
                <span style="color: #333333">{</span>
                    login_btn<span style="color: #333333">.</span><span style="color: #0000CC">setVisibility</span><span style="color: #333333">(</span>View<span style="color: #333333">.</span><span style="color: #0000CC">VISIBLE</span><span style="color: #333333">);</span>
                <span style="color: #333333">}</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">},</span> <span style="color: #0000DD; font-weight: bold">100</span><span style="color: #333333">);</span> <span style="color: #888888">// 1000 밀리초 (1초) 후에 실행</span>


    <span style="color: #333333">}</span>

    <span style="color: #555555; font-weight: bold">@Override</span>
    <span style="color: #008800; font-weight: bold">protected</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onResume</span><span style="color: #333333">()</span><span style="color: #888888">//뒤로 가기로 돌아왔을 때 명령어 실행</span>
    <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">.</span><span style="color: #0000CC">onResume</span><span style="color: #333333">();</span>
        login_btn<span style="color: #333333">.</span><span style="color: #0000CC">setVisibility</span><span style="color: #333333">(</span>View<span style="color: #333333">.</span><span style="color: #0000CC">GONE</span><span style="color: #333333">);</span>
        received_Language<span style="color: #333333">();</span>
        Login_verification<span style="color: #333333">();</span>
        <span style="color: #888888">//로그인 버튼 숨김 처리 코드</span>

        handler<span style="color: #333333">.</span><span style="color: #0000CC">postDelayed</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> Runnable<span style="color: #333333">()</span> <span style="color: #333333">{</span>
            <span style="color: #555555; font-weight: bold">@Override</span>
            <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">run</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
                <span style="color: #888888">// 딜레이 후에 실행할 코드를 여기에 작성</span>
                <span style="color: #888888">// 예: 로그인 검증 및 버튼 가시성 조절</span>
                <span style="color: #888888">//로그인</span>

                <span style="color: #008800; font-weight: bold">if</span><span style="color: #333333">(</span>login_verification_check <span style="color: #333333">==</span> <span style="color: #008800; font-weight: bold">false</span> <span style="color: #333333">&amp;&amp;</span> autologin <span style="color: #333333">==</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">)</span><span style="color: #888888">//만약에 로그인이 되어 있다면 로그인 버튼이 보이지 않게 설정</span>
                <span style="color: #333333">{</span>
                    login_btn<span style="color: #333333">.</span><span style="color: #0000CC">setVisibility</span><span style="color: #333333">(</span>View<span style="color: #333333">.</span><span style="color: #0000CC">VISIBLE</span><span style="color: #333333">);</span>
                <span style="color: #333333">}</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">},</span> <span style="color: #0000DD; font-weight: bold">100</span><span style="color: #333333">);</span> <span style="color: #888888">// 1000 밀리초 (1초) 후에 실행</span>
    <span style="color: #333333">}</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">received_Language</span><span style="color: #333333">()</span>
    <span style="color: #333333">{</span>
        SharedPreferences sharedPreferences <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPref&quot;</span><span style="color: #333333">,</span> MODE_PRIVATE<span style="color: #333333">);</span> <span style="color: #888888">//안드로이드 저장소의 MyPref 받아오기</span>
        String language_state <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;language_state&quot;</span><span style="color: #333333">,</span> <span style="background-color: #fff0f0">&quot;&quot;</span><span style="color: #333333">);</span> <span style="color: #888888">// language_state를 변수에 넣기</span>

        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>language_state<span style="color: #333333">.</span><span style="color: #0000CC">equals</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;en&quot;</span><span style="color: #333333">))</span> <span style="color: #333333">{</span>
            <span style="color: #888888">//product_reg_btn.setText(R.string.Product_Registration);</span>
            <span style="color: #888888">//AS_receipt_btn.setText(R.string.AS_Receipt);</span>
            login_btn<span style="color: #333333">.</span><span style="color: #0000CC">setText</span><span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">string</span><span style="color: #333333">.</span><span style="color: #0000CC">Login</span><span style="color: #333333">);</span>
            Logo_name<span style="color: #333333">.</span><span style="color: #0000CC">setText</span><span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">string</span><span style="color: #333333">.</span><span style="color: #0000CC">IoT_Lighting_System</span><span style="color: #333333">);</span>
            <span style="color: #333399; font-weight: bold">int</span> marginInDp <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">16</span><span style="color: #333333">;</span>
            <span style="color: #333399; font-weight: bold">float</span> marginInPixels <span style="color: #333333">=</span> TypedValue<span style="color: #333333">.</span><span style="color: #0000CC">applyDimension</span><span style="color: #333333">(</span>TypedValue<span style="color: #333333">.</span><span style="color: #0000CC">COMPLEX_UNIT_DIP</span><span style="color: #333333">,</span> marginInDp<span style="color: #333333">,</span> getResources<span style="color: #333333">().</span><span style="color: #0000CC">getDisplayMetrics</span><span style="color: #333333">());</span>
            ViewGroup<span style="color: #333333">.</span><span style="color: #0000CC">MarginLayoutParams</span> params <span style="color: #333333">=</span> <span style="color: #333333">(</span>ViewGroup<span style="color: #333333">.</span><span style="color: #0000CC">MarginLayoutParams</span><span style="color: #333333">)</span> Logo_name<span style="color: #333333">.</span><span style="color: #0000CC">getLayoutParams</span><span style="color: #333333">();</span>
            params<span style="color: #333333">.</span><span style="color: #0000CC">topMargin</span> <span style="color: #333333">=</span> <span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">)</span> marginInPixels<span style="color: #333333">;</span>
            Logo_name<span style="color: #333333">.</span><span style="color: #0000CC">setLayoutParams</span><span style="color: #333333">(</span>params<span style="color: #333333">);</span>
        <span style="color: #333333">}</span>
        <span style="color: #008800; font-weight: bold">else</span> <span style="color: #0066BB; font-weight: bold">if</span> <span style="color: #333333">(</span>language_state<span style="color: #333333">.</span><span style="color: #0000CC">equals</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;ko&quot;</span><span style="color: #333333">))</span> <span style="color: #333333">{</span>
            <span style="color: #888888">//product_reg_btn.setText(R.string.Product_Registration);</span>
            <span style="color: #888888">//AS_receipt_btn.setText(R.string.AS_Receipt);</span>
            login_btn<span style="color: #333333">.</span><span style="color: #0000CC">setText</span><span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">string</span><span style="color: #333333">.</span><span style="color: #0000CC">Login</span><span style="color: #333333">);</span>
            Logo_name<span style="color: #333333">.</span><span style="color: #0000CC">setText</span><span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">string</span><span style="color: #333333">.</span><span style="color: #0000CC">IoT_Lighting_System</span><span style="color: #333333">);</span>
            <span style="color: #333399; font-weight: bold">int</span> marginInDp <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">31</span><span style="color: #333333">;</span>
            <span style="color: #333399; font-weight: bold">float</span> marginInPixels <span style="color: #333333">=</span> TypedValue<span style="color: #333333">.</span><span style="color: #0000CC">applyDimension</span><span style="color: #333333">(</span>TypedValue<span style="color: #333333">.</span><span style="color: #0000CC">COMPLEX_UNIT_DIP</span><span style="color: #333333">,</span> marginInDp<span style="color: #333333">,</span> getResources<span style="color: #333333">().</span><span style="color: #0000CC">getDisplayMetrics</span><span style="color: #333333">());</span>
            ViewGroup<span style="color: #333333">.</span><span style="color: #0000CC">MarginLayoutParams</span> params <span style="color: #333333">=</span> <span style="color: #333333">(</span>ViewGroup<span style="color: #333333">.</span><span style="color: #0000CC">MarginLayoutParams</span><span style="color: #333333">)</span> Logo_name<span style="color: #333333">.</span><span style="color: #0000CC">getLayoutParams</span><span style="color: #333333">();</span>
            params<span style="color: #333333">.</span><span style="color: #0000CC">topMargin</span> <span style="color: #333333">=</span> <span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">)</span> marginInPixels<span style="color: #333333">;</span>
            Logo_name<span style="color: #333333">.</span><span style="color: #0000CC">setLayoutParams</span><span style="color: #333333">(</span>params<span style="color: #333333">);</span>
        <span style="color: #333333">}</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">init</span><span style="color: #333333">()</span>
    <span style="color: #333333">{</span>
        product_reg_btn <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">product_reg</span><span style="color: #333333">);</span> <span style="color: #888888">// 버튼 개체 링크 및 지정</span>
        AS_receipt_btn <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">AS_receipt_btn</span><span style="color: #333333">);</span>
        <span style="color: #888888">//my_list_btn = findViewById(R.id.my_list_btn);</span>
        Setting_btn <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">Setting_btn</span><span style="color: #333333">);</span>
        login_btn <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">login_btn</span><span style="color: #333333">);</span>
        Logo_name <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">Logo_name</span><span style="color: #333333">);</span>
        led_test <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">led_test</span><span style="color: #333333">);</span>
        <span style="color: #888888">//ble_test = findViewById(R.id.ble_test);</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">Login_verification</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        SharedPreferences sharedPreferences <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPref&quot;</span><span style="color: #333333">,</span> MODE_PRIVATE<span style="color: #333333">);</span> <span style="color: #888888">//안드로이드 저장소의 MyPref에서 token정보 받아오기</span>
        String token <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;token&quot;</span><span style="color: #333333">,</span> <span style="background-color: #fff0f0">&quot;&quot;</span><span style="color: #333333">);</span> <span style="color: #888888">// 토큰정보를 변수에 넣기</span>
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(!</span>token<span style="color: #333333">.</span><span style="color: #0000CC">isEmpty</span><span style="color: #333333">())</span><span style="color: #888888">//토큰이 비어있지 않을 때에만 서버로 전송</span>
        <span style="color: #333333">{</span>
            <span style="color: #888888">//testView.setText(token);</span>
            String url <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;http://raphab-test1.p-e.kr:8090/verify-token&quot;</span><span style="color: #333333">;</span>
            <span style="color: #888888">// JSON형식으로 데이터 통신을 진행합니다!</span>
            JSONObject token_send <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JSONObject<span style="color: #333333">();</span>
            <span style="color: #008800; font-weight: bold">try</span> <span style="color: #333333">{</span>
                <span style="color: #888888">//토큰을 json형태로 변환</span>
                token_send<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;token&quot;</span><span style="color: #333333">,</span> token<span style="color: #333333">);</span>
                String jsonString <span style="color: #333333">=</span> token_send<span style="color: #333333">.</span><span style="color: #0000CC">toString</span><span style="color: #333333">();</span>

                <span style="color: #888888">//전송</span>
                <span style="color: #008800; font-weight: bold">final</span> RequestQueue requestQueue <span style="color: #333333">=</span> Volley<span style="color: #333333">.</span><span style="color: #0000CC">newRequestQueue</span><span style="color: #333333">(</span>getApplicationContext<span style="color: #333333">());</span>
                <span style="color: #008800; font-weight: bold">final</span> JsonObjectRequest jsonObjectRequest <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JsonObjectRequest<span style="color: #333333">(</span>Request<span style="color: #333333">.</span><span style="color: #0000CC">Method</span><span style="color: #333333">.</span><span style="color: #0000CC">POST</span><span style="color: #333333">,</span> url<span style="color: #333333">,</span> token_send<span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">Listener</span><span style="color: #333333">&lt;</span>JSONObject<span style="color: #333333">&gt;()</span> <span style="color: #333333">{</span><span style="color: #888888">// json데이터 전송파트  //데이터 응답파트</span>
                    <span style="color: #555555; font-weight: bold">@Override</span>
                    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onResponse</span><span style="color: #333333">(</span>JSONObject response<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                        <span style="color: #008800; font-weight: bold">try</span> <span style="color: #333333">{</span>
                            String token_verification <span style="color: #333333">=</span> response<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;verification&quot;</span><span style="color: #333333">);</span>
                            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>token_verification<span style="color: #333333">.</span><span style="color: #0000CC">equals</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;success&quot;</span><span style="color: #333333">))</span> <span style="color: #333333">{</span>
                                <span style="color: #888888">// 토큰 검증에 성공한 경우의 처리</span>
                                <span style="color: #888888">//성공값 반환하기</span>
                                login_verification_check <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">;</span>
                            <span style="color: #333333">}</span>
                            <span style="color: #008800; font-weight: bold">else</span>
                            <span style="color: #333333">{</span>
                                Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span>getApplicationContext<span style="color: #333333">(),</span> <span style="background-color: #fff0f0">&quot;토큰검증 실패&quot;</span><span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
                                <span style="color: #008800; font-weight: bold">if</span><span style="color: #333333">(</span>autologin <span style="color: #333333">==</span> <span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">)</span>
                                <span style="color: #333333">{</span>
                                    SharedPreferences sharedPreferences1 <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPref&quot;</span><span style="color: #333333">,</span> MODE_PRIVATE<span style="color: #333333">);;</span>
                                    String ID <span style="color: #333333">=</span> sharedPreferences1<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;saved_id&quot;</span><span style="color: #333333">,</span> <span style="background-color: #fff0f0">&quot;&quot;</span><span style="color: #333333">);</span> <span style="color: #888888">// auto_login 값 가져오기</span>
                                    String PW <span style="color: #333333">=</span> sharedPreferences1<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;saved_pw&quot;</span><span style="color: #333333">,</span> <span style="background-color: #fff0f0">&quot;&quot;</span><span style="color: #333333">);</span> <span style="color: #888888">// auto_login 값 가져오기</span>
                                    requestLogin<span style="color: #333333">(</span>ID<span style="color: #333333">,</span>PW<span style="color: #333333">);</span>
                                <span style="color: #333333">}</span>
                                <span style="color: #008800; font-weight: bold">else</span>
                                <span style="color: #333333">{</span>
                                    login_verification_check <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span>
                                    <span style="color: #888888">// 토큰 검증에 실패한 경우의 처리</span>
                                    <span style="color: #888888">//로그인 팝업창 띄우기</span>
                                <span style="color: #333333">}</span>
                            <span style="color: #333333">}</span>
                        <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                            e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
                        <span style="color: #333333">}</span>
                    <span style="color: #333333">}</span>
                <span style="color: #333333">}</span>
                        <span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">ErrorListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
                    <span style="color: #555555; font-weight: bold">@Override</span>
                    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onErrorResponse</span><span style="color: #333333">(</span>VolleyError error<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                        error<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
                    <span style="color: #333333">}</span>
                <span style="color: #333333">});</span>
                jsonObjectRequest<span style="color: #333333">.</span><span style="color: #0000CC">setRetryPolicy</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> DefaultRetryPolicy<span style="color: #333333">(</span>DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_TIMEOUT_MS</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_MAX_RETRIES</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_BACKOFF_MULT</span><span style="color: #333333">));</span>
                requestQueue<span style="color: #333333">.</span><span style="color: #0000CC">add</span><span style="color: #333333">(</span>jsonObjectRequest<span style="color: #333333">);</span>
            <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span>
            <span style="color: #333333">{</span>
                e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">}</span>
        <span style="color: #008800; font-weight: bold">else</span> <span style="color: #333333">{</span>
            <span style="color: #888888">//토큰이 비어있을 때에는 처리하지 않음 또는 토큰이 없음을 알리는 메시지 출력</span>
            <span style="color: #008800; font-weight: bold">if</span><span style="color: #333333">(</span>autologin <span style="color: #333333">==</span> <span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">)</span>
            <span style="color: #333333">{</span>
                sharedPreferences <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPref&quot;</span><span style="color: #333333">,</span> MODE_PRIVATE<span style="color: #333333">);</span>
                String ID <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;saved_id&quot;</span><span style="color: #333333">,</span> <span style="background-color: #fff0f0">&quot;&quot;</span><span style="color: #333333">);</span> <span style="color: #888888">// auto_login 값 가져오기</span>
                String PW <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;saved_pw&quot;</span><span style="color: #333333">,</span> <span style="background-color: #fff0f0">&quot;&quot;</span><span style="color: #333333">);</span> <span style="color: #888888">// auto_login 값 가져오기</span>
                requestLogin<span style="color: #333333">(</span>ID<span style="color: #333333">,</span>PW<span style="color: #333333">);</span>
            <span style="color: #333333">}</span>
            <span style="color: #008800; font-weight: bold">else</span>
            <span style="color: #333333">{</span>
                login_verification_check <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span>
            <span style="color: #333333">}</span>
            <span style="color: #888888">//Toast.makeText(getApplicationContext(), &quot;로그인이 되어 있지 않습니다.&quot;, Toast.LENGTH_SHORT).show();</span>
        <span style="color: #333333">}</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">requestLogin</span><span style="color: #333333">(</span>String ID<span style="color: #333333">,</span> String PW<span style="color: #333333">)</span>
    <span style="color: #333333">{</span>
        String url <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;http://raphab-test1.p-e.kr:8090/login&quot;</span><span style="color: #333333">;</span><span style="color: #888888">//엔드포인트 지정 login이라는</span>


        <span style="color: #888888">// JSON형식으로 데이터 통신을 진행합니다!</span>
        JSONObject testjson <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JSONObject<span style="color: #333333">();</span>
        <span style="color: #008800; font-weight: bold">try</span>
        <span style="color: #333333">{</span>
            <span style="color: #888888">// 입력해둔 edittext의 id와 pw값을 받아와 put해줍니다 : 데이터를 json형식으로 바꿔 넣어주었습니다.</span>
            testjson<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;id&quot;</span><span style="color: #333333">,</span> ID<span style="color: #333333">);</span>
            testjson<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;password&quot;</span><span style="color: #333333">,</span> PW<span style="color: #333333">);</span>

            <span style="color: #888888">// 이제 전송해볼까요?</span>
            <span style="color: #008800; font-weight: bold">final</span> RequestQueue requestQueue <span style="color: #333333">=</span> Volley<span style="color: #333333">.</span><span style="color: #0000CC">newRequestQueue</span><span style="color: #333333">(</span>MainActivity<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">);</span>
            <span style="color: #008800; font-weight: bold">final</span> JsonObjectRequest jsonObjectRequest <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JsonObjectRequest<span style="color: #333333">(</span>Request<span style="color: #333333">.</span><span style="color: #0000CC">Method</span><span style="color: #333333">.</span><span style="color: #0000CC">POST</span><span style="color: #333333">,</span> url<span style="color: #333333">,</span> testjson<span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">Listener</span><span style="color: #333333">&lt;</span>JSONObject<span style="color: #333333">&gt;()</span>
            <span style="color: #333333">{</span>

                <span style="color: #888888">// 데이터 전달을 끝내고 이제 그 응답을 받을 차례입니다.</span>
                <span style="color: #555555; font-weight: bold">@Override</span>
                <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onResponse</span><span style="color: #333333">(</span>JSONObject response<span style="color: #333333">)</span>
                <span style="color: #333333">{</span>
                    <span style="color: #008800; font-weight: bold">try</span>
                    <span style="color: #333333">{</span>
                        <span style="color: #888888">// 서버로부터 받은 json형식의 응답을 받아</span>
                        <span style="color: #888888">//String resultId = response.getString(&quot;approve_id&quot;);</span>
                        <span style="color: #888888">//String resultPassword = response.getString(&quot;approve_pw&quot;);</span>

                        String  login_success_check <span style="color: #333333">=</span> response<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;login_success&quot;</span><span style="color: #333333">);</span>
                        <span style="color: #008800; font-weight: bold">if</span><span style="color: #333333">(</span>login_success_check<span style="color: #333333">.</span><span style="color: #0000CC">equals</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;true&quot;</span><span style="color: #333333">))</span>
                        <span style="color: #333333">{</span>
                            String token <span style="color: #333333">=</span> response<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;token&quot;</span><span style="color: #333333">);</span> <span style="color: #888888">// 전체 토큰을 가져옴</span>
                            Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span>getApplicationContext<span style="color: #333333">(),</span> token<span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>

                            <span style="color: #888888">// 토큰을 SharedPreferences에 저장</span>
                            SharedPreferences sharedPreferences <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPref&quot;</span><span style="color: #333333">,</span> Context<span style="color: #333333">.</span><span style="color: #0000CC">MODE_PRIVATE</span><span style="color: #333333">);</span> <span style="color: #888888">//Mypref 이름의 기본모드 설정</span>
                            SharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">Editor</span> editor <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">edit</span><span style="color: #333333">();</span> <span style="color: #888888">//SharedPreferences를 제어할 editor를 선언</span>
                            editor<span style="color: #333333">.</span><span style="color: #0000CC">putString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;token&quot;</span><span style="color: #333333">,</span> token<span style="color: #333333">);</span><span style="color: #888888">//KEY,VALUE 형식으로 저장</span>
                            editor<span style="color: #333333">.</span><span style="color: #0000CC">commit</span><span style="color: #333333">();</span> <span style="color: #888888">// 최종 커밋</span>
                        <span style="color: #333333">}</span>
                    <span style="color: #333333">}</span>
                    <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span>
                    <span style="color: #333333">{</span>
                        e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
                    <span style="color: #333333">}</span>
                <span style="color: #333333">}</span>
                <span style="color: #888888">// 서버로 데이터 전달 및 응답 받기에 실패한 경우 아래 코드가 실행됩니다.</span>
            <span style="color: #333333">}</span>
                    <span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">ErrorListener</span><span style="color: #333333">()</span>
            <span style="color: #333333">{</span>
                <span style="color: #555555; font-weight: bold">@Override</span>
                <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onErrorResponse</span><span style="color: #333333">(</span>VolleyError error<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                    error<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
                <span style="color: #333333">}</span>
            <span style="color: #333333">});</span>
            jsonObjectRequest<span style="color: #333333">.</span><span style="color: #0000CC">setRetryPolicy</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> DefaultRetryPolicy<span style="color: #333333">(</span>DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_TIMEOUT_MS</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_MAX_RETRIES</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_BACKOFF_MULT</span><span style="color: #333333">));</span>
            requestQueue<span style="color: #333333">.</span><span style="color: #0000CC">add</span><span style="color: #333333">(</span>jsonObjectRequest<span style="color: #333333">);</span>

        <span style="color: #333333">}</span>
        <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span>
        <span style="color: #333333">{</span>
            e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
        <span style="color: #333333">}</span>
    <span style="color: #333333">}</span>
<span style="color: #333333">}</span>
</pre></td></tr></table></div>

<h1>#RectangleInfoData</h1>
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">package</span> com<span style="color: #333333">.</span><span style="color: #0000CC">example</span><span style="color: #333333">.</span><span style="color: #0000CC">raphab</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">RectangleInfoData</span> <span style="color: #333333">{</span>
    <span style="color: #333399; font-weight: bold">int</span> rectangleX<span style="color: #333333">;</span>
    <span style="color: #333399; font-weight: bold">int</span> rectangleY<span style="color: #333333">;</span>
    <span style="color: #333399; font-weight: bold">int</span> width<span style="color: #333333">;</span>
    <span style="color: #333399; font-weight: bold">int</span> height<span style="color: #333333">;</span>
    <span style="color: #008800; font-weight: bold">private</span> String shapeName<span style="color: #333333">;</span> <span style="color: #888888">// 도형의 이름 추가</span>

    <span style="color: #888888">/**</span>
<span style="color: #888888">     * 사각형을 캔버스에 그리기 위해 필요한 데이터</span>
<span style="color: #888888">     * @param rectangleX - 현재 사각형이 위치하고 있는 x좌표값</span>
<span style="color: #888888">     * @param rectangleY - 현재 사각형이 위치하고 있는 y좌표값</span>
<span style="color: #888888">     * @param width - 현재 사각형의 가로 길이</span>
<span style="color: #888888">     * @param height - 현재 사각형의 세로 길이</span>
<span style="color: #888888">     */</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #0066BB; font-weight: bold">RectangleInfoData</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span> rectangleX<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">int</span> rectangleY<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">int</span> width<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">int</span> height<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">rectangleX</span> <span style="color: #333333">=</span> rectangleX<span style="color: #333333">;</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">rectangleY</span> <span style="color: #333333">=</span> rectangleY<span style="color: #333333">;</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">width</span> <span style="color: #333333">=</span> width<span style="color: #333333">;</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">height</span> <span style="color: #333333">=</span> height<span style="color: #333333">;</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">shapeName</span> <span style="color: #333333">=</span> shapeName<span style="color: #333333">;</span> <span style="color: #888888">// 기본 이름을 빈 문자열로 초기화</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">int</span> <span style="color: #0066BB; font-weight: bold">getRectangleX</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">return</span> rectangleX<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setRectangleX</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span> rectangleX<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">rectangleX</span> <span style="color: #333333">=</span> rectangleX<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">int</span> <span style="color: #0066BB; font-weight: bold">getRectangleY</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">return</span> rectangleY<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setRectangleY</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span> rectangleY<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">rectangleY</span> <span style="color: #333333">=</span> rectangleY<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">int</span> <span style="color: #0066BB; font-weight: bold">getWidth</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">return</span> width<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setWidth</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span> width<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">width</span> <span style="color: #333333">=</span> width<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">int</span> <span style="color: #0066BB; font-weight: bold">getHeight</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">return</span> height<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setHeight</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span> height<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">height</span> <span style="color: #333333">=</span> height<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">// 도형의 이름 getter 메서드</span>
    <span style="color: #008800; font-weight: bold">public</span> String <span style="color: #0066BB; font-weight: bold">getShapeName</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">return</span> shapeName<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">// 도형의 이름 setter 메서드</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setShapeName</span><span style="color: #333333">(</span>String shapeName<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">shapeName</span> <span style="color: #333333">=</span> shapeName<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>
<span style="color: #333333">}</span>
</pre></td></tr></table></div>

    <h1>#DrawingView</h1>
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">  1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">package</span> com<span style="color: #333333">.</span><span style="color: #0000CC">example</span><span style="color: #333333">.</span><span style="color: #0000CC">raphab</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.Context</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.graphics.Canvas</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.graphics.Color</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.graphics.Paint</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.graphics.Rect</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.util.AttributeSet</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.view.MotionEvent</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.view.View</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">androidx.annotation.Nullable</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">java.util.ArrayList</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">java.util.List</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">DrawingView</span> <span style="color: #008800; font-weight: bold">extends</span> View <span style="color: #333333">{</span>
    <span style="color: #008800; font-weight: bold">private</span> Paint strokePaint<span style="color: #333333">;</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">int</span> selectedShapeIndex <span style="color: #333333">=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span> <span style="color: #888888">// 선택된 도형의 인덱스</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">boolean</span> showOverlayButton <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span> <span style="color: #888888">// 오버레이 버튼 표시 여부</span>
    <span style="color: #008800; font-weight: bold">private</span> Rect overlayButtonRect<span style="color: #333333">;</span> <span style="color: #888888">// 오버레이 버튼의 사각형</span>
    <span style="color: #008800; font-weight: bold">private</span> Paint overlayButtonPaint<span style="color: #333333">;</span> <span style="color: #888888">// 오버레이 버튼의 페인트</span>
    <span style="color: #008800; font-weight: bold">private</span> Paint overlayButtonTextPaint<span style="color: #333333">;</span> <span style="color: #888888">// 오버레이 버튼 텍스트의 페인트</span>
    <span style="color: #008800; font-weight: bold">private</span> Paint cornerPointPaint<span style="color: #333333">;</span> <span style="color: #888888">// 모서리 점을 그리기 위한 페인트</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">boolean</span> cornerPointsVisible <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">;</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">boolean</span> moving <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span> <span style="color: #888888">// 이동 모드 여부</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">float</span> lastTouchX<span style="color: #333333">,</span> lastTouchY<span style="color: #333333">;</span> <span style="color: #888888">// 마지막 터치 좌표</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">float</span> initialTouchX<span style="color: #333333">,</span> initialTouchY<span style="color: #333333">;</span> <span style="color: #888888">// 초기 터치 좌표</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">float</span> initialRectangleX<span style="color: #333333">,</span> initialRectangleY<span style="color: #333333">;</span> <span style="color: #888888">// 초기 사각형 위치</span>

    <span style="color: #008800; font-weight: bold">private</span> Paint textPaint<span style="color: #333333">;</span> <span style="color: #888888">// 이름을 그리기 위한 페인트</span>
    <span style="color: #008800; font-weight: bold">private</span> ArrayList<span style="color: #333333">&lt;</span>String<span style="color: #333333">&gt;</span> rectangleNames <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> ArrayList<span style="color: #333333">&lt;&gt;();</span> <span style="color: #888888">// 사각형 이름 목록</span>

    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #008800; font-weight: bold">static</span> <span style="color: #008800; font-weight: bold">final</span> <span style="color: #333399; font-weight: bold">int</span> CORNER_RADIUS <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">10</span><span style="color: #333333">;</span> <span style="color: #888888">// 모서리 점의 반지름 크기</span>
    <span style="color: #888888">// 마지막으로 터치된 모서리의 상수 정의</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #008800; font-weight: bold">static</span> <span style="color: #008800; font-weight: bold">final</span> <span style="color: #333399; font-weight: bold">int</span> RESIZING_NONE <span style="color: #333333">=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #008800; font-weight: bold">static</span> <span style="color: #008800; font-weight: bold">final</span> <span style="color: #333399; font-weight: bold">int</span> RESIZING_TOP_LEFT <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #008800; font-weight: bold">static</span> <span style="color: #008800; font-weight: bold">final</span> <span style="color: #333399; font-weight: bold">int</span> RESIZING_TOP_RIGHT <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #008800; font-weight: bold">static</span> <span style="color: #008800; font-weight: bold">final</span> <span style="color: #333399; font-weight: bold">int</span> RESIZING_BOTTOM_RIGHT <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">2</span><span style="color: #333333">;</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #008800; font-weight: bold">static</span> <span style="color: #008800; font-weight: bold">final</span> <span style="color: #333399; font-weight: bold">int</span> RESIZING_BOTTOM_LEFT <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">3</span><span style="color: #333333">;</span>
    <span style="color: #008800; font-weight: bold">private</span> Rect<span style="color: #333333">[]</span> cornerRects<span style="color: #333333">;</span> <span style="color: #888888">// 모서리 영역을 저장하는 Rect 배열</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #008800; font-weight: bold">static</span> <span style="color: #008800; font-weight: bold">final</span> <span style="color: #333399; font-weight: bold">int</span> CORNER_TOUCH_SIZE <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">80</span><span style="color: #333333">;</span><span style="color: #888888">//모서리를 터치하기 위한 영역의 크기를 나타냅니다.</span>
    <span style="color: #008800; font-weight: bold">private</span> DeleteButtonChangeListener deleteButtonChangeListener<span style="color: #333333">;</span>
    <span style="color: #008800; font-weight: bold">private</span> ArrayList<span style="color: #333333">&lt;</span>RectangleInfoData<span style="color: #333333">&gt;</span> drawnRectangleList <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> ArrayList<span style="color: #333333">&lt;&gt;();</span> <span style="color: #888888">// 그려진 사각형 목록</span>
    <span style="color: #008800; font-weight: bold">private</span> Paint paint<span style="color: #333333">;</span> <span style="color: #888888">// 사각형을 그리기 위한 페인트</span>


    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">boolean</span> resizing <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span> <span style="color: #888888">// 크기 조정 모드 여부</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">int</span> resizingCorner <span style="color: #333333">=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span> <span style="color: #888888">// 크기 조정을 위한 코너 인덱스</span>
    <span style="color: #008800; font-weight: bold">private</span> String shapeName<span style="color: #333333">;</span> <span style="color: #888888">// 도형의 이름을 저장하는 변수</span>

    <span style="color: #008800; font-weight: bold">private</span> ShapeClickInterface clickListener<span style="color: #333333">;</span> <span style="color: #888888">// 도형 클릭 리스너</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">boolean</span> isDeleteMode <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span>

    <span style="color: #888888">// 클릭 리스너를 설정합니다.</span>
    <span style="color: #888888">//param listener ShapeClickInterface를 구현한 객체</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setClickListener</span><span style="color: #333333">(</span>ShapeClickInterface listener<span style="color: #333333">)</span> <span style="color: #333333">{</span><span style="color: #888888">//</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">clickListener</span> <span style="color: #333333">=</span> listener<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>


    <span style="color: #888888">//DrawingView의 생성자입니다. Context 객체를 전달받아 초기화합니다.</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #0066BB; font-weight: bold">DrawingView</span><span style="color: #333333">(</span>Context context<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">(</span>context<span style="color: #333333">);</span>
        init<span style="color: #333333">();</span>
        initOverlayButton<span style="color: #333333">();</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">// DrawingView의 생성자입니다. Context 객체와 AttributeSet을 전달받아 초기화합니다.</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #0066BB; font-weight: bold">DrawingView</span><span style="color: #333333">(</span>Context context<span style="color: #333333">,</span> <span style="color: #555555; font-weight: bold">@Nullable</span> AttributeSet attrs<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">(</span>context<span style="color: #333333">,</span> attrs<span style="color: #333333">);</span>
        init<span style="color: #333333">();</span>
        initOverlayButton<span style="color: #333333">();</span>
    <span style="color: #333333">}</span>


    <span style="color: #888888">//DrawingView의 생성자입니다. Context 객체, AttributeSet, defStyleAttr을 전달받아 초기화합니다.</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #0066BB; font-weight: bold">DrawingView</span><span style="color: #333333">(</span>Context context<span style="color: #333333">,</span> <span style="color: #555555; font-weight: bold">@Nullable</span> AttributeSet attrs<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">int</span> defStyleAttr<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">(</span>context<span style="color: #333333">,</span> attrs<span style="color: #333333">,</span> defStyleAttr<span style="color: #333333">);</span>
        init<span style="color: #333333">();</span>
        initOverlayButton<span style="color: #333333">();</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">//DrawingView의 생성자입니다. Context 객체, AttributeSet, defStyleAttr, defStyleRes을 전달받아 초기화합니다.</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #0066BB; font-weight: bold">DrawingView</span><span style="color: #333333">(</span>Context context<span style="color: #333333">,</span> <span style="color: #555555; font-weight: bold">@Nullable</span> AttributeSet attrs<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">int</span> defStyleAttr<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">int</span> defStyleRes<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">(</span>context<span style="color: #333333">,</span> attrs<span style="color: #333333">,</span> defStyleAttr<span style="color: #333333">,</span> defStyleRes<span style="color: #333333">);</span>
        init<span style="color: #333333">();</span>
        initOverlayButton<span style="color: #333333">();</span>
    <span style="color: #333333">}</span>


    <span style="color: #888888">// 오버레이 버튼 초기화</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">initOverlayButton</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        overlayButtonRect <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Rect<span style="color: #333333">();</span>
        overlayButtonPaint <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Paint<span style="color: #333333">();</span>
        overlayButtonPaint<span style="color: #333333">.</span><span style="color: #0000CC">setColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">BLUE</span><span style="color: #333333">);</span>
        overlayButtonTextPaint <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Paint<span style="color: #333333">();</span>
        overlayButtonTextPaint<span style="color: #333333">.</span><span style="color: #0000CC">setColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">WHITE</span><span style="color: #333333">);</span>
        overlayButtonTextPaint<span style="color: #333333">.</span><span style="color: #0000CC">setTextSize</span><span style="color: #333333">(</span><span style="color: #0000DD; font-weight: bold">36</span><span style="color: #333333">);</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">// 사각형을 그리기 위한 페인트 초기화</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">init</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        paint <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Paint<span style="color: #333333">();</span>
        paint<span style="color: #333333">.</span><span style="color: #0000CC">setAntiAlias</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">);</span>
        paint<span style="color: #333333">.</span><span style="color: #0000CC">setStyle</span><span style="color: #333333">(</span>Paint<span style="color: #333333">.</span><span style="color: #0000CC">Style</span><span style="color: #333333">.</span><span style="color: #0000CC">FILL_AND_STROKE</span><span style="color: #333333">);</span> <span style="color: #888888">// 도형 내부와 테두리를 동시에 채우는 스타일로 설정</span>
        paint<span style="color: #333333">.</span><span style="color: #0000CC">setColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">GRAY</span><span style="color: #333333">);</span> <span style="color: #888888">// 도형 내부 색상 설정</span>

        strokePaint <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Paint<span style="color: #333333">();</span>
        strokePaint<span style="color: #333333">.</span><span style="color: #0000CC">setAntiAlias</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">);</span>
        strokePaint<span style="color: #333333">.</span><span style="color: #0000CC">setStyle</span><span style="color: #333333">(</span>Paint<span style="color: #333333">.</span><span style="color: #0000CC">Style</span><span style="color: #333333">.</span><span style="color: #0000CC">STROKE</span><span style="color: #333333">);</span>
        strokePaint<span style="color: #333333">.</span><span style="color: #0000CC">setColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">BLACK</span><span style="color: #333333">);</span> <span style="color: #888888">// 도형의 테두리 색상 설정</span>
        strokePaint<span style="color: #333333">.</span><span style="color: #0000CC">setStrokeWidth</span><span style="color: #333333">(</span><span style="color: #0000DD; font-weight: bold">10</span><span style="color: #333333">);</span> <span style="color: #888888">// 테두리 선의 두께 설정</span>

        cornerRects <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Rect<span style="color: #333333">[</span><span style="color: #0000DD; font-weight: bold">4</span><span style="color: #333333">];</span>
        <span style="color: #008800; font-weight: bold">for</span> <span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span> i <span style="color: #333333">&lt;</span> cornerRects<span style="color: #333333">.</span><span style="color: #0000CC">length</span><span style="color: #333333">;</span> i<span style="color: #333333">++)</span> <span style="color: #333333">{</span>
            cornerRects<span style="color: #333333">[</span>i<span style="color: #333333">]</span> <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Rect<span style="color: #333333">();</span>
        <span style="color: #333333">}</span>
        <span style="color: #888888">// 모서리 점 페인트 초기화</span>
        cornerPointPaint <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Paint<span style="color: #333333">();</span>
        cornerPointPaint<span style="color: #333333">.</span><span style="color: #0000CC">setAntiAlias</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">);</span>
        cornerPointPaint<span style="color: #333333">.</span><span style="color: #0000CC">setStyle</span><span style="color: #333333">(</span>Paint<span style="color: #333333">.</span><span style="color: #0000CC">Style</span><span style="color: #333333">.</span><span style="color: #0000CC">FILL</span><span style="color: #333333">);</span>
        cornerPointPaint<span style="color: #333333">.</span><span style="color: #0000CC">setColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">BLACK</span><span style="color: #333333">);</span>

        textPaint <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Paint<span style="color: #333333">();</span>
        textPaint<span style="color: #333333">.</span><span style="color: #0000CC">setColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">BLACK</span><span style="color: #333333">);</span>
        textPaint<span style="color: #333333">.</span><span style="color: #0000CC">setTextSize</span><span style="color: #333333">(</span><span style="color: #0000DD; font-weight: bold">24</span><span style="color: #333333">);</span>
        textPaint<span style="color: #333333">.</span><span style="color: #0000CC">setTextAlign</span><span style="color: #333333">(</span>Paint<span style="color: #333333">.</span><span style="color: #0000CC">Align</span><span style="color: #333333">.</span><span style="color: #0000CC">CENTER</span><span style="color: #333333">);</span>
    <span style="color: #333333">}</span>

    <span style="color: #555555; font-weight: bold">@Override</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">boolean</span> <span style="color: #0066BB; font-weight: bold">onTouchEvent</span><span style="color: #333333">(</span>MotionEvent event<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #333399; font-weight: bold">int</span> x <span style="color: #333333">=</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>event<span style="color: #333333">.</span><span style="color: #0000CC">getX</span><span style="color: #333333">());</span>
        <span style="color: #333399; font-weight: bold">int</span> y <span style="color: #333333">=</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>event<span style="color: #333333">.</span><span style="color: #0000CC">getY</span><span style="color: #333333">());</span>
        <span style="color: #888888">// 화면의 범위 설정</span>
        <span style="color: #333399; font-weight: bold">int</span> minX <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span>
        <span style="color: #333399; font-weight: bold">int</span> minY <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span>
        <span style="color: #333399; font-weight: bold">int</span> maxX <span style="color: #333333">=</span> getWidth<span style="color: #333333">();</span>
        <span style="color: #333399; font-weight: bold">int</span> maxY <span style="color: #333333">=</span> getHeight<span style="color: #333333">();</span>

        <span style="color: #888888">// 좌표를 화면 범위 내로 제한</span>
        x <span style="color: #333333">=</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">max</span><span style="color: #333333">(</span>minX<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">min</span><span style="color: #333333">(</span>maxX<span style="color: #333333">,</span> x<span style="color: #333333">));</span>
        y <span style="color: #333333">=</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">max</span><span style="color: #333333">(</span>minY<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">min</span><span style="color: #333333">(</span>maxY<span style="color: #333333">,</span> y<span style="color: #333333">));</span>

        <span style="color: #008800; font-weight: bold">switch</span> <span style="color: #333333">(</span>event<span style="color: #333333">.</span><span style="color: #0000CC">getAction</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
            <span style="color: #008800; font-weight: bold">case</span> MotionEvent<span style="color: #333333">.</span><span style="color: #0000CC">ACTION_DOWN</span><span style="color: #333333">:</span>
                <span style="color: #888888">// 터치 다운 이벤트 처리</span>
                <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>isDeleteMode<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                    selectedShapeIndex <span style="color: #333333">=</span> getSelectedShapeIndex<span style="color: #333333">(</span>x<span style="color: #333333">,</span> y<span style="color: #333333">);</span>
                    <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>selectedShapeIndex <span style="color: #333333">!=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">)</span> <span style="color: #333333">{</span>
                        deleteSelectedShape<span style="color: #333333">();</span>
                    <span style="color: #333333">}</span>
                    invalidate<span style="color: #333333">();</span> <span style="color: #888888">// 뷰를 갱신하여 변경된 상태를 반영합니다.</span>
                <span style="color: #333333">}</span>
                <span style="color: #008800; font-weight: bold">else</span> <span style="color: #333333">{</span>
                    <span style="color: #888888">// 삭제 상태가 아닌 경우 도형 선택 로직 추가</span>

                    selectedShapeIndex <span style="color: #333333">=</span> getSelectedShapeIndex<span style="color: #333333">(</span>x<span style="color: #333333">,</span> y<span style="color: #333333">);</span>
                    <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>selectedShapeIndex <span style="color: #333333">!=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">)</span> <span style="color: #333333">{</span>
                        <span style="color: #888888">// Move the selected shape to the top of the drawnRectangleList</span>
                        RectangleInfoData selectedShape <span style="color: #333333">=</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">get</span><span style="color: #333333">(</span>selectedShapeIndex<span style="color: #333333">);</span>
                        drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">remove</span><span style="color: #333333">(</span>selectedShapeIndex<span style="color: #333333">);</span>
                        drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">add</span><span style="color: #333333">(</span>selectedShape<span style="color: #333333">);</span>
                        selectedShapeIndex <span style="color: #333333">=</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">size</span><span style="color: #333333">()</span> <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span>
                        moving <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">;</span>
                        initialTouchX <span style="color: #333333">=</span> x<span style="color: #333333">;</span>
                        initialTouchY <span style="color: #333333">=</span> y<span style="color: #333333">;</span>
                        RectangleInfoData rectangle <span style="color: #333333">=</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">get</span><span style="color: #333333">(</span>selectedShapeIndex<span style="color: #333333">);</span>
                        initialRectangleX <span style="color: #333333">=</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleX</span><span style="color: #333333">();</span>
                        initialRectangleY <span style="color: #333333">=</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleY</span><span style="color: #333333">();</span>
                        resizingCorner <span style="color: #333333">=</span> getResizingCorner<span style="color: #333333">(</span>x<span style="color: #333333">,</span> y<span style="color: #333333">);</span>
                        cornerPointsVisible <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">;</span>

                        <span style="color: #008800; font-weight: bold">return</span> <span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">;</span>
                    <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #333333">{</span>
                        <span style="color: #888888">// 도형 외의 영역을 터치한 경우 선택 해제</span>
                        moving <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span>
                        selectedShapeIndex <span style="color: #333333">=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span>
                        resizingCorner <span style="color: #333333">=</span> RESIZING_NONE<span style="color: #333333">;</span>
                        cornerPointsVisible <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span>
                        invalidate<span style="color: #333333">();</span>
                    <span style="color: #333333">}</span>
                <span style="color: #333333">}</span>
                <span style="color: #008800; font-weight: bold">break</span><span style="color: #333333">;</span>

            <span style="color: #008800; font-weight: bold">case</span> MotionEvent<span style="color: #333333">.</span><span style="color: #0000CC">ACTION_MOVE</span><span style="color: #333333">:</span>
                <span style="color: #888888">// 터치 이동 이벤트 처리</span>
                <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>moving<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                    <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>resizingCorner <span style="color: #333333">!=</span> RESIZING_NONE<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                        resizeRectangleShape<span style="color: #333333">(</span>x<span style="color: #333333">,</span> y<span style="color: #333333">);</span>
                    <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #333333">{</span>
                        moveSelectedShape<span style="color: #333333">(</span>x <span style="color: #333333">-</span> initialTouchX<span style="color: #333333">,</span> y <span style="color: #333333">-</span> initialTouchY<span style="color: #333333">);</span>
                    <span style="color: #333333">}</span>
                    invalidate<span style="color: #333333">();</span> <span style="color: #888888">// 화면을 갱신하여 크기 조정이 바로 반영되도록 함</span>
                    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">;</span>
                <span style="color: #333333">}</span>
                <span style="color: #008800; font-weight: bold">break</span><span style="color: #333333">;</span>

            <span style="color: #008800; font-weight: bold">case</span> MotionEvent<span style="color: #333333">.</span><span style="color: #0000CC">ACTION_UP</span><span style="color: #333333">:</span>
                <span style="color: #888888">// 터치 업 이벤트 처리</span>
                moving <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span>
                selectedShapeIndex <span style="color: #333333">=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span>
                resizingCorner <span style="color: #333333">=</span> RESIZING_NONE<span style="color: #333333">;</span>
                cornerPointsVisible <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span>
                <span style="color: #008800; font-weight: bold">break</span><span style="color: #333333">;</span>
        <span style="color: #333333">}</span>

        <span style="color: #008800; font-weight: bold">return</span> <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">.</span><span style="color: #0000CC">onTouchEvent</span><span style="color: #333333">(</span>event<span style="color: #333333">);</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">// 선택된 도형을 맨 위로 이동시킴</span>

    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">int</span> <span style="color: #0066BB; font-weight: bold">getSelectedShapeIndex</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">float</span> x<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">float</span> y<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #333399; font-weight: bold">int</span> topShapeIndex <span style="color: #333333">=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span>
        <span style="color: #008800; font-weight: bold">for</span> <span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">size</span><span style="color: #333333">()</span> <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span> i <span style="color: #333333">&gt;=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span> i<span style="color: #333333">--)</span> <span style="color: #333333">{</span>
            RectangleInfoData rectangle <span style="color: #333333">=</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">get</span><span style="color: #333333">(</span>i<span style="color: #333333">);</span>
            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>x <span style="color: #333333">&gt;=</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleX</span><span style="color: #333333">()</span> <span style="color: #333333">&amp;&amp;</span> x <span style="color: #333333">&lt;=</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleX</span><span style="color: #333333">()</span> <span style="color: #333333">+</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getWidth</span><span style="color: #333333">()</span>
                    <span style="color: #333333">&amp;&amp;</span> y <span style="color: #333333">&gt;=</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleY</span><span style="color: #333333">()</span> <span style="color: #333333">&amp;&amp;</span> y <span style="color: #333333">&lt;=</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleY</span><span style="color: #333333">()</span> <span style="color: #333333">+</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getHeight</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
                topShapeIndex <span style="color: #333333">=</span> i<span style="color: #333333">;</span>
                <span style="color: #008800; font-weight: bold">break</span><span style="color: #333333">;</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">}</span>
        <span style="color: #008800; font-weight: bold">return</span> topShapeIndex<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>


    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">moveSelectedShape</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">float</span> dx<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">float</span> dy<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>selectedShapeIndex <span style="color: #333333">!=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&amp;&amp;</span> selectedShapeIndex <span style="color: #333333">&lt;</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">size</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
            RectangleInfoData rectangle <span style="color: #333333">=</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">get</span><span style="color: #333333">(</span>selectedShapeIndex<span style="color: #333333">);</span>

            <span style="color: #888888">// 기존에 선택된 도형은 이동하지 않음</span>
            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(!</span>moving<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                <span style="color: #008800; font-weight: bold">return</span><span style="color: #333333">;</span>
            <span style="color: #333333">}</span>

            <span style="color: #888888">// 새로운 위치 계산</span>
            <span style="color: #333399; font-weight: bold">float</span> newX <span style="color: #333333">=</span> initialRectangleX <span style="color: #333333">+</span> dx<span style="color: #333333">;</span>
            <span style="color: #333399; font-weight: bold">float</span> newY <span style="color: #333333">=</span> initialRectangleY <span style="color: #333333">+</span> dy<span style="color: #333333">;</span>

            <span style="color: #888888">// 화면의 범위 설정</span>
            <span style="color: #333399; font-weight: bold">int</span> minX <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span>
            <span style="color: #333399; font-weight: bold">int</span> minY <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span>
            <span style="color: #333399; font-weight: bold">int</span> maxX <span style="color: #333333">=</span> getWidth<span style="color: #333333">()</span> <span style="color: #333333">-</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getWidth</span><span style="color: #333333">();</span>
            <span style="color: #333399; font-weight: bold">int</span> maxY <span style="color: #333333">=</span> getHeight<span style="color: #333333">()</span> <span style="color: #333333">-</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getHeight</span><span style="color: #333333">();</span>

            <span style="color: #888888">// 좌표를 화면 범위 내로 제한</span>
            newX <span style="color: #333333">=</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">max</span><span style="color: #333333">(</span>minX<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">min</span><span style="color: #333333">(</span>maxX<span style="color: #333333">,</span> newX<span style="color: #333333">));</span>
            newY <span style="color: #333333">=</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">max</span><span style="color: #333333">(</span>minY<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">min</span><span style="color: #333333">(</span>maxY<span style="color: #333333">,</span> newY<span style="color: #333333">));</span>

            rectangle<span style="color: #333333">.</span><span style="color: #0000CC">setRectangleX</span><span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>newX<span style="color: #333333">));</span>
            rectangle<span style="color: #333333">.</span><span style="color: #0000CC">setRectangleY</span><span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>newY<span style="color: #333333">));</span>
        <span style="color: #333333">}</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">// 도형 크기 조절을 위한 메서드</span>
    <span style="color: #888888">// 크기 조절을 위한 메서드</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #008800; font-weight: bold">static</span> <span style="color: #008800; font-weight: bold">final</span> <span style="color: #333399; font-weight: bold">int</span> MIN_RECTANGLE_SIZE <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">50</span><span style="color: #333333">;</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">resizeRectangleShape</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">float</span> x<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">float</span> y<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>selectedShapeIndex <span style="color: #333333">!=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&amp;&amp;</span> selectedShapeIndex <span style="color: #333333">&lt;</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">size</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
            RectangleInfoData rectangle <span style="color: #333333">=</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">get</span><span style="color: #333333">(</span>selectedShapeIndex<span style="color: #333333">);</span>

            <span style="color: #333399; font-weight: bold">float</span> left <span style="color: #333333">=</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleX</span><span style="color: #333333">();</span>
            <span style="color: #333399; font-weight: bold">float</span> top <span style="color: #333333">=</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleY</span><span style="color: #333333">();</span>
            <span style="color: #333399; font-weight: bold">float</span> right <span style="color: #333333">=</span> left <span style="color: #333333">+</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getWidth</span><span style="color: #333333">();</span>
            <span style="color: #333399; font-weight: bold">float</span> bottom <span style="color: #333333">=</span> top <span style="color: #333333">+</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getHeight</span><span style="color: #333333">();</span>

            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>resizingCorner <span style="color: #333333">==</span> RESIZING_TOP_LEFT<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                <span style="color: #888888">// 왼쪽 위 모서리를 잡았을 때</span>
                left <span style="color: #333333">=</span> x<span style="color: #333333">;</span>
                top <span style="color: #333333">=</span> y<span style="color: #333333">;</span>
            <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>resizingCorner <span style="color: #333333">==</span> RESIZING_TOP_RIGHT<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                <span style="color: #888888">// 오른쪽 위 모서리를 잡았을 때</span>
                right <span style="color: #333333">=</span> x<span style="color: #333333">;</span>
                top <span style="color: #333333">=</span> y<span style="color: #333333">;</span>
            <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>resizingCorner <span style="color: #333333">==</span> RESIZING_BOTTOM_RIGHT<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                <span style="color: #888888">// 오른쪽 아래 모서리를 잡았을 때</span>
                right <span style="color: #333333">=</span> x<span style="color: #333333">;</span>
                bottom <span style="color: #333333">=</span> y<span style="color: #333333">;</span>
            <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>resizingCorner <span style="color: #333333">==</span> RESIZING_BOTTOM_LEFT<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                <span style="color: #888888">// 왼쪽 아래 모서리를 잡았을 때</span>
                left <span style="color: #333333">=</span> x<span style="color: #333333">;</span>
                bottom <span style="color: #333333">=</span> y<span style="color: #333333">;</span>
            <span style="color: #333333">}</span>

            <span style="color: #333399; font-weight: bold">int</span> newWidth <span style="color: #333333">=</span> <span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">)</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">max</span><span style="color: #333333">(</span>right <span style="color: #333333">-</span> left<span style="color: #333333">,</span> MIN_RECTANGLE_SIZE<span style="color: #333333">);</span>
            <span style="color: #333399; font-weight: bold">int</span> newHeight <span style="color: #333333">=</span> <span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">)</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">max</span><span style="color: #333333">(</span>bottom <span style="color: #333333">-</span> top<span style="color: #333333">,</span> MIN_RECTANGLE_SIZE<span style="color: #333333">);</span>

            <span style="color: #888888">// 각 모서리의 위치를 재조정</span>
            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>resizingCorner <span style="color: #333333">==</span> RESIZING_TOP_LEFT<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                rectangle<span style="color: #333333">.</span><span style="color: #0000CC">setRectangleX</span><span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>right <span style="color: #333333">-</span> newWidth<span style="color: #333333">));</span>
                rectangle<span style="color: #333333">.</span><span style="color: #0000CC">setRectangleY</span><span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>bottom <span style="color: #333333">-</span> newHeight<span style="color: #333333">));</span>
            <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>resizingCorner <span style="color: #333333">==</span> RESIZING_TOP_RIGHT<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                rectangle<span style="color: #333333">.</span><span style="color: #0000CC">setRectangleY</span><span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>bottom <span style="color: #333333">-</span> newHeight<span style="color: #333333">));</span>
            <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>resizingCorner <span style="color: #333333">==</span> RESIZING_BOTTOM_RIGHT<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                <span style="color: #888888">// 오른쪽 아래 모서리는 움직일 필요가 없음</span>
            <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>resizingCorner <span style="color: #333333">==</span> RESIZING_BOTTOM_LEFT<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                rectangle<span style="color: #333333">.</span><span style="color: #0000CC">setRectangleX</span><span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>right <span style="color: #333333">-</span> newWidth<span style="color: #333333">));</span>
            <span style="color: #333333">}</span>

            rectangle<span style="color: #333333">.</span><span style="color: #0000CC">setWidth</span><span style="color: #333333">(</span>newWidth<span style="color: #333333">);</span>
            rectangle<span style="color: #333333">.</span><span style="color: #0000CC">setHeight</span><span style="color: #333333">(</span>newHeight<span style="color: #333333">);</span>

            invalidate<span style="color: #333333">();</span>
        <span style="color: #333333">}</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">// 모서리의 위치를 판별하는 메서드</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">int</span> <span style="color: #0066BB; font-weight: bold">getResizingCorner</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">float</span> x<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">float</span> y<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>selectedShapeIndex <span style="color: #333333">&gt;=</span> <span style="color: #0000DD; font-weight: bold">0</span> <span style="color: #333333">&amp;&amp;</span> selectedShapeIndex <span style="color: #333333">&lt;</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">size</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
            RectangleInfoData rectangle <span style="color: #333333">=</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">get</span><span style="color: #333333">(</span>selectedShapeIndex<span style="color: #333333">);</span>
            <span style="color: #333399; font-weight: bold">float</span> left <span style="color: #333333">=</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleX</span><span style="color: #333333">();</span>
            <span style="color: #333399; font-weight: bold">float</span> top <span style="color: #333333">=</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleY</span><span style="color: #333333">();</span>
            <span style="color: #333399; font-weight: bold">float</span> right <span style="color: #333333">=</span> left <span style="color: #333333">+</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getWidth</span><span style="color: #333333">();</span>
            <span style="color: #333399; font-weight: bold">float</span> bottom <span style="color: #333333">=</span> top <span style="color: #333333">+</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getHeight</span><span style="color: #333333">();</span>

            <span style="color: #888888">// 각 모서리의 영역 설정</span>
            cornerRects<span style="color: #333333">[</span>RESIZING_TOP_LEFT<span style="color: #333333">].</span><span style="color: #0000CC">set</span><span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>left<span style="color: #333333">)</span> <span style="color: #333333">-</span> CORNER_TOUCH_SIZE<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>top<span style="color: #333333">)</span> <span style="color: #333333">-</span> CORNER_TOUCH_SIZE<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>left<span style="color: #333333">)</span> <span style="color: #333333">+</span> CORNER_TOUCH_SIZE<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>top<span style="color: #333333">)</span> <span style="color: #333333">+</span> CORNER_TOUCH_SIZE<span style="color: #333333">);</span>
            cornerRects<span style="color: #333333">[</span>RESIZING_TOP_RIGHT<span style="color: #333333">].</span><span style="color: #0000CC">set</span><span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>right<span style="color: #333333">)</span> <span style="color: #333333">-</span> CORNER_TOUCH_SIZE<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>top<span style="color: #333333">)</span> <span style="color: #333333">-</span> CORNER_TOUCH_SIZE<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>right<span style="color: #333333">)</span> <span style="color: #333333">+</span> CORNER_TOUCH_SIZE<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>top<span style="color: #333333">)</span> <span style="color: #333333">+</span> CORNER_TOUCH_SIZE<span style="color: #333333">);</span>
            cornerRects<span style="color: #333333">[</span>RESIZING_BOTTOM_RIGHT<span style="color: #333333">].</span><span style="color: #0000CC">set</span><span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>right<span style="color: #333333">)</span> <span style="color: #333333">-</span> CORNER_TOUCH_SIZE<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>bottom<span style="color: #333333">)</span> <span style="color: #333333">-</span> CORNER_TOUCH_SIZE<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>right<span style="color: #333333">)</span> <span style="color: #333333">+</span> CORNER_TOUCH_SIZE<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>bottom<span style="color: #333333">)</span> <span style="color: #333333">+</span> CORNER_TOUCH_SIZE<span style="color: #333333">);</span>
            cornerRects<span style="color: #333333">[</span>RESIZING_BOTTOM_LEFT<span style="color: #333333">].</span><span style="color: #0000CC">set</span><span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>left<span style="color: #333333">)</span> <span style="color: #333333">-</span> CORNER_TOUCH_SIZE<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>bottom<span style="color: #333333">)</span> <span style="color: #333333">-</span> CORNER_TOUCH_SIZE<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>left<span style="color: #333333">)</span> <span style="color: #333333">+</span> CORNER_TOUCH_SIZE<span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>bottom<span style="color: #333333">)</span> <span style="color: #333333">+</span> CORNER_TOUCH_SIZE<span style="color: #333333">);</span>

            <span style="color: #888888">// 모서리 영역과 터치 좌표를 비교하여 모서리 인덱스 반환</span>
            <span style="color: #008800; font-weight: bold">for</span> <span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span> i <span style="color: #333333">&lt;</span> cornerRects<span style="color: #333333">.</span><span style="color: #0000CC">length</span><span style="color: #333333">;</span> i<span style="color: #333333">++)</span> <span style="color: #333333">{</span>
                <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>cornerRects<span style="color: #333333">[</span>i<span style="color: #333333">].</span><span style="color: #0000CC">contains</span><span style="color: #333333">((</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">)</span> x<span style="color: #333333">,</span> <span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">)</span> y<span style="color: #333333">))</span> <span style="color: #333333">{</span>
                    <span style="color: #008800; font-weight: bold">return</span> i<span style="color: #333333">;</span>
                <span style="color: #333333">}</span>
            <span style="color: #333333">}</span>

            <span style="color: #888888">// 꼭짓점 주변 영역 검사</span>
            <span style="color: #333399; font-weight: bold">int</span> touchThreshold <span style="color: #333333">=</span> CORNER_TOUCH_SIZE <span style="color: #333333">/</span> <span style="color: #0000DD; font-weight: bold">2</span><span style="color: #333333">;</span>
            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">abs</span><span style="color: #333333">(</span>x <span style="color: #333333">-</span> left<span style="color: #333333">)</span> <span style="color: #333333">&lt;=</span> touchThreshold <span style="color: #333333">&amp;&amp;</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">abs</span><span style="color: #333333">(</span>y <span style="color: #333333">-</span> top<span style="color: #333333">)</span> <span style="color: #333333">&lt;=</span> touchThreshold<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                <span style="color: #008800; font-weight: bold">return</span> RESIZING_TOP_LEFT<span style="color: #333333">;</span>
            <span style="color: #333333">}</span>
            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">abs</span><span style="color: #333333">(</span>x <span style="color: #333333">-</span> right<span style="color: #333333">)</span> <span style="color: #333333">&lt;=</span> touchThreshold <span style="color: #333333">&amp;&amp;</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">abs</span><span style="color: #333333">(</span>y <span style="color: #333333">-</span> top<span style="color: #333333">)</span> <span style="color: #333333">&lt;=</span> touchThreshold<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                <span style="color: #008800; font-weight: bold">return</span> RESIZING_TOP_RIGHT<span style="color: #333333">;</span>
            <span style="color: #333333">}</span>
            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">abs</span><span style="color: #333333">(</span>x <span style="color: #333333">-</span> right<span style="color: #333333">)</span> <span style="color: #333333">&lt;=</span> touchThreshold <span style="color: #333333">&amp;&amp;</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">abs</span><span style="color: #333333">(</span>y <span style="color: #333333">-</span> bottom<span style="color: #333333">)</span> <span style="color: #333333">&lt;=</span> touchThreshold<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                <span style="color: #008800; font-weight: bold">return</span> RESIZING_BOTTOM_RIGHT<span style="color: #333333">;</span>
            <span style="color: #333333">}</span>
            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>Math<span style="color: #333333">.</span><span style="color: #0000CC">abs</span><span style="color: #333333">(</span>x <span style="color: #333333">-</span> left<span style="color: #333333">)</span> <span style="color: #333333">&lt;=</span> touchThreshold <span style="color: #333333">&amp;&amp;</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">abs</span><span style="color: #333333">(</span>y <span style="color: #333333">-</span> bottom<span style="color: #333333">)</span> <span style="color: #333333">&lt;=</span> touchThreshold<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                <span style="color: #008800; font-weight: bold">return</span> RESIZING_BOTTOM_LEFT<span style="color: #333333">;</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">}</span>

        <span style="color: #008800; font-weight: bold">return</span> RESIZING_NONE<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>


    <span style="color: #888888">// onDraw 메서드에서 모서리 점 그리는 부분 추가</span>
    <span style="color: #555555; font-weight: bold">@Override</span>
    <span style="color: #008800; font-weight: bold">protected</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onDraw</span><span style="color: #333333">(</span>Canvas canvas<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #888888">// 모든 사각형 그리기</span>
        <span style="color: #008800; font-weight: bold">for</span> <span style="color: #333333">(</span>RectangleInfoData rectangle <span style="color: #333333">:</span> drawnRectangleList<span style="color: #333333">)</span> <span style="color: #333333">{</span>
            Rect rect <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Rect<span style="color: #333333">(</span>
                    Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleX</span><span style="color: #333333">()),</span>
                    Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleY</span><span style="color: #333333">()),</span>
                    Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleX</span><span style="color: #333333">()</span> <span style="color: #333333">+</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getWidth</span><span style="color: #333333">()),</span>
                    Math<span style="color: #333333">.</span><span style="color: #0000CC">round</span><span style="color: #333333">(</span>rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleY</span><span style="color: #333333">()</span> <span style="color: #333333">+</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getHeight</span><span style="color: #333333">()));</span>

            canvas<span style="color: #333333">.</span><span style="color: #0000CC">drawRect</span><span style="color: #333333">(</span>rect<span style="color: #333333">,</span> paint<span style="color: #333333">);</span> <span style="color: #888888">// 도형 내부를 설정된 색상으로 채워진 사각형 그리기</span>
            canvas<span style="color: #333333">.</span><span style="color: #0000CC">drawRect</span><span style="color: #333333">(</span>rect<span style="color: #333333">,</span> strokePaint<span style="color: #333333">);</span> <span style="color: #888888">// 도형의 테두리를 설정된 색상으로 그리기</span>

            <span style="color: #888888">// 도형 이름 그리기</span>
            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(!</span>rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getShapeName</span><span style="color: #333333">().</span><span style="color: #0000CC">isEmpty</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
                <span style="color: #888888">// 도형의 중심 위치 계산</span>
                <span style="color: #333399; font-weight: bold">float</span> centerX <span style="color: #333333">=</span> rect<span style="color: #333333">.</span><span style="color: #0000CC">centerX</span><span style="color: #333333">();</span>
                <span style="color: #333399; font-weight: bold">float</span> centerY <span style="color: #333333">=</span> rect<span style="color: #333333">.</span><span style="color: #0000CC">centerY</span><span style="color: #333333">();</span>

                <span style="color: #888888">// 글자의 크기 조절을 위해 테스트 해보고 원하는 크기로 조절하세요</span>
                <span style="color: #333399; font-weight: bold">float</span> textSize <span style="color: #333333">=</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">min</span><span style="color: #333333">(</span>rect<span style="color: #333333">.</span><span style="color: #0000CC">width</span><span style="color: #333333">(),</span> rect<span style="color: #333333">.</span><span style="color: #0000CC">height</span><span style="color: #333333">())</span> <span style="color: #333333">*</span> <span style="color: #6600EE; font-weight: bold">0.2f</span><span style="color: #333333">;</span> <span style="color: #888888">// 도형 크기의 20%로 설정</span>

                textPaint<span style="color: #333333">.</span><span style="color: #0000CC">setTextSize</span><span style="color: #333333">(</span>textSize<span style="color: #333333">);</span>

                <span style="color: #888888">// 글자 그리기</span>
                <span style="color: #333399; font-weight: bold">float</span> textY <span style="color: #333333">=</span> centerY <span style="color: #333333">-</span> <span style="color: #333333">((</span>textPaint<span style="color: #333333">.</span><span style="color: #0000CC">descent</span><span style="color: #333333">()</span> <span style="color: #333333">+</span> textPaint<span style="color: #333333">.</span><span style="color: #0000CC">ascent</span><span style="color: #333333">())</span> <span style="color: #333333">/</span> <span style="color: #0000DD; font-weight: bold">2</span><span style="color: #333333">);</span>
                canvas<span style="color: #333333">.</span><span style="color: #0000CC">drawText</span><span style="color: #333333">(</span>rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getShapeName</span><span style="color: #333333">(),</span> centerX<span style="color: #333333">,</span> textY<span style="color: #333333">,</span> textPaint<span style="color: #333333">);</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">}</span>

        <span style="color: #888888">// 모서리 점 그리기</span>
        drawCornerPoints<span style="color: #333333">(</span>canvas<span style="color: #333333">);</span>

        <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">.</span><span style="color: #0000CC">onDraw</span><span style="color: #333333">(</span>canvas<span style="color: #333333">);</span>
    <span style="color: #333333">}</span>
    <span style="color: #888888">// 모서리 점을 그리는 메서드</span>
    <span style="color: #888888">// 모서리 점을 그리는 메서드</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">drawCornerPoints</span><span style="color: #333333">(</span>Canvas canvas<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>selectedShapeIndex <span style="color: #333333">&gt;=</span> <span style="color: #0000DD; font-weight: bold">0</span> <span style="color: #333333">&amp;&amp;</span> selectedShapeIndex <span style="color: #333333">&lt;</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">size</span><span style="color: #333333">()</span> <span style="color: #333333">&amp;&amp;</span> moving<span style="color: #333333">)</span> <span style="color: #333333">{</span>
            RectangleInfoData rectangle <span style="color: #333333">=</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">get</span><span style="color: #333333">(</span>selectedShapeIndex<span style="color: #333333">);</span>
            <span style="color: #333399; font-weight: bold">float</span> left <span style="color: #333333">=</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleX</span><span style="color: #333333">();</span>
            <span style="color: #333399; font-weight: bold">float</span> top <span style="color: #333333">=</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleY</span><span style="color: #333333">();</span>
            <span style="color: #333399; font-weight: bold">float</span> right <span style="color: #333333">=</span> left <span style="color: #333333">+</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getWidth</span><span style="color: #333333">();</span>
            <span style="color: #333399; font-weight: bold">float</span> bottom <span style="color: #333333">=</span> top <span style="color: #333333">+</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getHeight</span><span style="color: #333333">();</span>

            <span style="color: #333399; font-weight: bold">float</span> cornerRadius <span style="color: #333333">=</span> CORNER_TOUCH_SIZE <span style="color: #333333">/</span> <span style="color: #0000DD; font-weight: bold">3</span><span style="color: #333333">;</span> <span style="color: #888888">// 모서리 점의 반지름 크기</span>

            <span style="color: #888888">// 각 모서리 점을 그립니다.</span>
            canvas<span style="color: #333333">.</span><span style="color: #0000CC">drawCircle</span><span style="color: #333333">(</span>left<span style="color: #333333">,</span> top<span style="color: #333333">,</span> cornerRadius<span style="color: #333333">,</span> cornerPointPaint<span style="color: #333333">);</span> <span style="color: #888888">// 왼쪽 위</span>
            canvas<span style="color: #333333">.</span><span style="color: #0000CC">drawCircle</span><span style="color: #333333">(</span>right<span style="color: #333333">,</span> top<span style="color: #333333">,</span> cornerRadius<span style="color: #333333">,</span> cornerPointPaint<span style="color: #333333">);</span> <span style="color: #888888">// 오른쪽 위</span>
            canvas<span style="color: #333333">.</span><span style="color: #0000CC">drawCircle</span><span style="color: #333333">(</span>right<span style="color: #333333">,</span> bottom<span style="color: #333333">,</span> cornerRadius<span style="color: #333333">,</span> cornerPointPaint<span style="color: #333333">);</span> <span style="color: #888888">// 오른쪽 아래</span>
            canvas<span style="color: #333333">.</span><span style="color: #0000CC">drawCircle</span><span style="color: #333333">(</span>left<span style="color: #333333">,</span> bottom<span style="color: #333333">,</span> cornerRadius<span style="color: #333333">,</span> cornerPointPaint<span style="color: #333333">);</span> <span style="color: #888888">// 왼쪽 아래</span>
        <span style="color: #333333">}</span>
    <span style="color: #333333">}</span>
<span style="color: #888888">//    // onDraw 메서드에서 모서리 점 그리는 부분 추가</span>
<span style="color: #888888">//    private void drawCornerPoints(Canvas canvas, RectangleInfoData rectangle) {</span>
<span style="color: #888888">//        float left = rectangle.getRectangleX();</span>
<span style="color: #888888">//        float top = rectangle.getRectangleY();</span>
<span style="color: #888888">//        float right = left + rectangle.getWidth();</span>
<span style="color: #888888">//        float bottom = top + rectangle.getHeight();</span>
<span style="color: #888888">//</span>
<span style="color: #888888">//        // 좌상단 모서리</span>
<span style="color: #888888">//        canvas.drawCircle(left, top, CORNER_RADIUS, paint);</span>
<span style="color: #888888">//</span>
<span style="color: #888888">//        // 우상단 모서리</span>
<span style="color: #888888">//        canvas.drawCircle(right, top, CORNER_RADIUS, paint);</span>
<span style="color: #888888">//</span>
<span style="color: #888888">//        // 우하단 모서리</span>
<span style="color: #888888">//        canvas.drawCircle(right, bottom, CORNER_RADIUS, paint);</span>
<span style="color: #888888">//</span>
<span style="color: #888888">//        // 좌하단 모서리</span>
<span style="color: #888888">//        canvas.drawCircle(left, bottom, CORNER_RADIUS, paint);</span>
<span style="color: #888888">//    }</span>
<span style="color: #888888">//</span>
<span style="color: #888888">//</span>
<span style="color: #888888">//    // 사각형을 지정된 좌표로 이동</span>
<span style="color: #888888">//    private void moveRectangleShape(float x, float y) {</span>
<span style="color: #888888">//        if (selectedShapeIndex != -1 &amp;&amp; selectedShapeIndex &lt; drawnRectangleList.size()) {</span>
<span style="color: #888888">//            RectangleInfoData rectangle = drawnRectangleList.get(selectedShapeIndex);</span>
<span style="color: #888888">//            float deltaX = x - lastTouchX;</span>
<span style="color: #888888">//            float deltaY = y - lastTouchY;</span>
<span style="color: #888888">//</span>
<span style="color: #888888">//            rectangle.setRectangleX(rectangle.getRectangleX() + Math.round(deltaX));</span>
<span style="color: #888888">//            rectangle.setRectangleY(rectangle.getRectangleY() + Math.round(deltaY));</span>
<span style="color: #888888">//</span>
<span style="color: #888888">//            lastTouchX = x;</span>
<span style="color: #888888">//            lastTouchY = y;</span>
<span style="color: #888888">//</span>
<span style="color: #888888">//            invalidate();</span>
<span style="color: #888888">//        }</span>
<span style="color: #888888">//    }</span>
<span style="color: #888888">//</span>
<span style="color: #888888">// 사각형을 생성하고 목록에 추가하는 메서드</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">createRectangle</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        RectangleInfoData rectangleInfoData <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> RectangleInfoData<span style="color: #333333">(</span>
                getWidth<span style="color: #333333">()</span> <span style="color: #333333">/</span> <span style="color: #0000DD; font-weight: bold">2</span><span style="color: #333333">,</span>
                getHeight<span style="color: #333333">()</span> <span style="color: #333333">/</span> <span style="color: #0000DD; font-weight: bold">2</span><span style="color: #333333">,</span>
                <span style="color: #0000DD; font-weight: bold">200</span><span style="color: #333333">,</span>
                <span style="color: #0000DD; font-weight: bold">200</span><span style="color: #333333">);</span>

        <span style="color: #888888">// 도형의 이름 설정</span>
        rectangleInfoData<span style="color: #333333">.</span><span style="color: #0000CC">setShapeName</span><span style="color: #333333">(</span>shapeName<span style="color: #333333">);</span> <span style="color: #888888">// shapeName은 DrawingView 클래스의 변수로 가정합니다.</span>

        drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">add</span><span style="color: #333333">(</span>rectangleInfoData<span style="color: #333333">);</span>

        <span style="color: #888888">// 다시 그리기를 위해 무효화</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">invalidate</span><span style="color: #333333">();</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">// 도형의 이름을 설정하는 메서드</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setShapeName</span><span style="color: #333333">(</span>String name<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        shapeName <span style="color: #333333">=</span> name<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> List<span style="color: #333333">&lt;</span>RectangleInfoData<span style="color: #333333">&gt;</span> <span style="color: #0066BB; font-weight: bold">getDrawnRectangleList</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">return</span> drawnRectangleList<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setDrawnRectangleList</span><span style="color: #333333">(</span>List<span style="color: #333333">&lt;</span>RectangleInfoData<span style="color: #333333">&gt;</span> rectangles<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">clear</span><span style="color: #333333">();</span>
        drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">addAll</span><span style="color: #333333">(</span>rectangles<span style="color: #333333">);</span>
        invalidate<span style="color: #333333">();</span> <span style="color: #888888">// 화면 갱신을 위해 호출합니다.</span>
    <span style="color: #333333">}</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setDeleteMode</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">boolean</span> deleteMode<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        isDeleteMode <span style="color: #333333">=</span> deleteMode<span style="color: #333333">;</span>
        cornerPointsVisible <span style="color: #333333">=</span> deleteMode<span style="color: #333333">;</span> <span style="color: #888888">// 삭제 모드일 때에만 모서리 점을 표시하도록 설정</span>

        <span style="color: #888888">// 삭제 모드가 아닐 때는 모든 선택 상태를 초기화합니다.</span>
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(!</span>deleteMode<span style="color: #333333">)</span> <span style="color: #333333">{</span>
            selectedShapeIndex <span style="color: #333333">=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span>
            cornerPointsVisible <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span>
        <span style="color: #333333">}</span>

        invalidate<span style="color: #333333">();</span> <span style="color: #888888">// 뷰를 갱신하여 변경된 상태를 반영합니다.</span>
    <span style="color: #333333">}</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">interface</span> <span style="color: #BB0066; font-weight: bold">DeleteButtonChangeListener</span> <span style="color: #333333">{</span>
        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onChangeButtonColor</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">boolean</span> deleteMode<span style="color: #333333">);</span>
    <span style="color: #333333">}</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setDeleteButtonChangeListener</span><span style="color: #333333">(</span>DeleteButtonChangeListener listener<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">deleteButtonChangeListener</span> <span style="color: #333333">=</span> listener<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">deleteSelectedShape</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>selectedShapeIndex <span style="color: #333333">!=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">&amp;&amp;</span> selectedShapeIndex <span style="color: #333333">&lt;</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">size</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
            drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">remove</span><span style="color: #333333">(</span>selectedShapeIndex<span style="color: #333333">);</span>
            selectedShapeIndex <span style="color: #333333">=</span> <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span>
            cornerPointsVisible <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span>
            isDeleteMode <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">;</span>

            <span style="color: #888888">// 삭제 버튼 색상 변경</span>
            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>deleteButtonChangeListener <span style="color: #333333">!=</span> <span style="color: #008800; font-weight: bold">null</span><span style="color: #333333">)</span> <span style="color: #333333">{</span>
                deleteButtonChangeListener<span style="color: #333333">.</span><span style="color: #0000CC">onChangeButtonColor</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">);</span> <span style="color: #888888">// 삭제 버튼 색상을 일반 모드 색상으로 변경</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">}</span>
    <span style="color: #333333">}</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">moveLastRectangle</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span> x<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">int</span> y<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">size</span><span style="color: #333333">()</span> <span style="color: #333333">&gt;</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">)</span> <span style="color: #333333">{</span>
            RectangleInfoData lastRectangle <span style="color: #333333">=</span> drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">get</span><span style="color: #333333">(</span>drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">size</span><span style="color: #333333">()</span> <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">);</span>
            lastRectangle<span style="color: #333333">.</span><span style="color: #0000CC">setRectangleX</span><span style="color: #333333">(</span>x<span style="color: #333333">);</span>
            lastRectangle<span style="color: #333333">.</span><span style="color: #0000CC">setRectangleY</span><span style="color: #333333">(</span>y<span style="color: #333333">);</span>
            invalidate<span style="color: #333333">();</span> <span style="color: #888888">// 화면 다시 그리기</span>
        <span style="color: #333333">}</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">// 삭제 모드 여부를 반환하는 메서드</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">boolean</span> <span style="color: #0066BB; font-weight: bold">isDeleteMode</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">return</span> isDeleteMode<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

<span style="color: #333333">}</span>
</pre></td></tr></table></div>


<h1>Use_Enable_Setting</h1>
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">  1
    2
    3
    4
    5
    6
    7
    8
    9
   10
   11
   12
   13
   14
   15
   16
   17
   18
   19
   20
   21
   22
   23
   24
   25
   26
   27
   28
   29
   30
   31
   32
   33
   34
   35
   36
   37
   38
   39
   40
   41
   42
   43
   44
   45
   46
   47
   48
   49
   50
   51
   52
   53
   54
   55
   56
   57
   58
   59
   60
   61
   62
   63
   64
   65
   66
   67
   68
   69
   70
   71
   72
   73
   74
   75
   76
   77
   78
   79
   80
   81
   82
   83
   84
   85
   86
   87
   88
   89
   90
   91
   92
   93
   94
   95
   96
   97
   98
   99
  100
  101
  102
  103
  104
  105
  106
  107
  108
  109
  110
  111
  112
  113
  114
  115
  116
  117
  118
  119
  120
  121
  122
  123
  124
  125
  126
  127
  128
  129
  130
  131
  132
  133
  134
  135
  136
  137
  138
  139
  140
  141
  142
  143
  144
  145
  146
  147
  148
  149
  150
  151
  152
  153
  154
  155
  156
  157
  158
  159
  160
  161
  162
  163
  164
  165
  166
  167
  168
  169
  170
  171
  172
  173
  174
  175
  176
  177
  178
  179
  180
  181
  182
  183
  184
  185
  186
  187
  188
  189
  190
  191
  192
  193
  194
  195
  196
  197
  198
  199
  200
  201
  202
  203
  204
  205
  206
  207
  208
  209
  210
  211
  212
  213
  214</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">package</span> com<span style="color: #333333">.</span><span style="color: #0000CC">example</span><span style="color: #333333">.</span><span style="color: #0000CC">raphab</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">androidx.appcompat.app.AppCompatActivity</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.SharedPreferences</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.graphics.Color</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.os.Bundle</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.view.View</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.Button</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.Toast</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.DefaultRetryPolicy</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.Request</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.RequestQueue</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.Response</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.VolleyError</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.toolbox.JsonObjectRequest</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.toolbox.Volley</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">org.json.JSONException</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">org.json.JSONObject</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">io.jsonwebtoken.Claims</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">io.jsonwebtoken.JwtException</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">io.jsonwebtoken.Jwts</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Use_Enable_Setting</span> <span style="color: #008800; font-weight: bold">extends</span> AppCompatActivity <span style="color: #333333">{</span>
      Button LED_CONTROL<span style="color: #333333">;</span>
      Button disinfection_control<span style="color: #333333">;</span>
      Button reboot<span style="color: #333333">;</span>
      <span style="color: #333399; font-weight: bold">int</span> LED_Status <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span> <span style="color: #888888">// 0: 꺼짐, 1: 켜짐</span>
      <span style="color: #333399; font-weight: bold">int</span> disinfection_Status <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span> <span style="color: #888888">// 0:꺼짐, 1: 켜짐</span>
      <span style="color: #888888">// SharedPreferences를 이용하여 저장된 user_id를 가져옵니다.</span>
  
      SharedPreferences sharedPreferences<span style="color: #333333">;</span>
      String user_id<span style="color: #333333">;</span>
  
  
  
      <span style="color: #555555; font-weight: bold">@Override</span>
      <span style="color: #008800; font-weight: bold">protected</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onCreate</span><span style="color: #333333">(</span>Bundle savedInstanceState<span style="color: #333333">)</span> <span style="color: #333333">{</span>
          <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">.</span><span style="color: #0000CC">onCreate</span><span style="color: #333333">(</span>savedInstanceState<span style="color: #333333">);</span>
          setContentView<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">layout</span><span style="color: #333333">.</span><span style="color: #0000CC">activity_use_enable_setting</span><span style="color: #333333">);</span>
  
          init<span style="color: #333333">();</span>
  
          sharedPreferences <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPref&quot;</span><span style="color: #333333">,</span> MODE_PRIVATE<span style="color: #333333">);</span>
          user_id <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;saved_id&quot;</span><span style="color: #333333">,</span> <span style="background-color: #fff0f0">&quot;&quot;</span><span style="color: #333333">);</span> <span style="color: #888888">// 저장된 user_id 가져오기</span>
  
          LED_CONTROL<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
              <span style="color: #555555; font-weight: bold">@Override</span>
              <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span>
              <span style="color: #333333">{</span>
                  <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>LED_Status <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">)</span> <span style="color: #333333">{</span> <span style="color: #888888">// 현재 꺼져있는 상태라면</span>
                      LED_Status <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span> <span style="color: #888888">// 켜진 상태로 변경</span>
                      LED_CONTROL<span style="color: #333333">.</span><span style="color: #0000CC">setBackgroundColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">GREEN</span><span style="color: #333333">);</span> <span style="color: #888888">// 버튼 배경 이미지 변경 (꺼진 상태 이미지)</span>
                      request_LED<span style="color: #333333">(</span>LED_Status<span style="color: #333333">,</span>user_id<span style="color: #333333">);</span> <span style="color: #888888">// LED 상태 서버에 전송</span>
                      showToast<span style="color: #333333">(</span>user_id<span style="color: #333333">);</span>
                  <span style="color: #333333">}</span>
                  <span style="color: #008800; font-weight: bold">else</span>
                  <span style="color: #333333">{</span> <span style="color: #888888">// 현재 켜진 상태라면</span>
                      LED_Status <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span> <span style="color: #888888">// 꺼진 상태로 변경</span>
                      LED_CONTROL<span style="color: #333333">.</span><span style="color: #0000CC">setBackgroundColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">parseColor</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;#03A9F4&quot;</span><span style="color: #333333">));</span><span style="color: #888888">// 버튼 배경 이미지 변경 (켜진 상태 이미지)</span>
                      request_LED<span style="color: #333333">(</span>LED_Status<span style="color: #333333">,</span>user_id<span style="color: #333333">);</span> <span style="color: #888888">// LED 상태 서버에 전송</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">});</span>
  
          disinfection_control<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
              <span style="color: #555555; font-weight: bold">@Override</span>
              <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                  <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>disinfection_Status <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">)</span> <span style="color: #333333">{</span> <span style="color: #888888">// 현재 꺼져있는 상태라면</span>
                      disinfection_Status <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">;</span> <span style="color: #888888">// 켜진 상태로 변경</span>
                      disinfection_control<span style="color: #333333">.</span><span style="color: #0000CC">setBackgroundColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">GREEN</span><span style="color: #333333">);</span> <span style="color: #888888">// 버튼 배경 이미지 변경 (꺼진 상태 이미지)</span>
                      request_disinfection<span style="color: #333333">(</span>disinfection_Status<span style="color: #333333">,</span>user_id<span style="color: #333333">);</span> <span style="color: #888888">// LED 상태 서버에 전송</span>
                  <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #333333">{</span> <span style="color: #888888">// 현재 켜진 상태라면</span>
                      disinfection_Status <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span> <span style="color: #888888">// 꺼진 상태로 변경</span>
                      disinfection_control<span style="color: #333333">.</span><span style="color: #0000CC">setBackgroundColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">parseColor</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;#03A9F4&quot;</span><span style="color: #333333">));</span><span style="color: #888888">// 버튼 배경 이미지 변경 (켜진 상태 이미지)</span>
                      request_disinfection<span style="color: #333333">(</span>disinfection_Status<span style="color: #333333">,</span>user_id<span style="color: #333333">);</span> <span style="color: #888888">// LED 상태 서버에 전송</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">});</span>
  
          reboot<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
              <span style="color: #555555; font-weight: bold">@Override</span>
              <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                  reboot<span style="color: #333333">();</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">});</span>
      <span style="color: #333333">}</span>
  
      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">init</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
          LED_CONTROL <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">LED_control_btn</span><span style="color: #333333">);</span>
          disinfection_control <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">disinfection_control_btn</span><span style="color: #333333">);</span>
          reboot <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">reboot_btn</span><span style="color: #333333">);</span>
      <span style="color: #333333">}</span>
  
      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">reboot</span><span style="color: #333333">()</span>
      <span style="color: #333333">{</span>
          String url <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;http://raphab-test1.p-e.kr:8090/reboot&quot;</span><span style="color: #333333">;</span>
  
          <span style="color: #888888">// JSON형식으로 데이터 통신을 진행합니다!</span>
          JSONObject reboot <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JSONObject<span style="color: #333333">();</span>
          <span style="color: #008800; font-weight: bold">try</span> <span style="color: #333333">{</span>
  
              <span style="color: #888888">// user_id 값을 JSON에 추가합니다.</span>
              reboot<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;reboot_check&quot;</span><span style="color: #333333">,</span> <span style="background-color: #fff0f0">&quot;reboot&quot;</span><span style="color: #333333">);</span>
  
              <span style="color: #008800; font-weight: bold">final</span> RequestQueue requestQueue <span style="color: #333333">=</span> Volley<span style="color: #333333">.</span><span style="color: #0000CC">newRequestQueue</span><span style="color: #333333">(</span>Use_Enable_Setting<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">);</span>
              <span style="color: #008800; font-weight: bold">final</span> JsonObjectRequest jsonObjectRequest <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JsonObjectRequest<span style="color: #333333">(</span>Request<span style="color: #333333">.</span><span style="color: #0000CC">Method</span><span style="color: #333333">.</span><span style="color: #0000CC">POST</span><span style="color: #333333">,</span> url<span style="color: #333333">,</span> reboot<span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">Listener</span><span style="color: #333333">&lt;</span>JSONObject<span style="color: #333333">&gt;()</span> <span style="color: #333333">{</span>
                  <span style="color: #555555; font-weight: bold">@Override</span>
                  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onResponse</span><span style="color: #333333">(</span>JSONObject response<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                      <span style="color: #888888">// 응답 처리 로직</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">},</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">ErrorListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
                  <span style="color: #555555; font-weight: bold">@Override</span>
                  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onErrorResponse</span><span style="color: #333333">(</span>VolleyError error<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                      error<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
                      showToast<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;통신 오류 발생&quot;</span><span style="color: #333333">);</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">});</span>
              jsonObjectRequest<span style="color: #333333">.</span><span style="color: #0000CC">setRetryPolicy</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> DefaultRetryPolicy<span style="color: #333333">(</span>DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_TIMEOUT_MS</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_MAX_RETRIES</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_BACKOFF_MULT</span><span style="color: #333333">));</span>
              requestQueue<span style="color: #333333">.</span><span style="color: #0000CC">add</span><span style="color: #333333">(</span>jsonObjectRequest<span style="color: #333333">);</span>
  
          <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span> <span style="color: #333333">{</span>
              e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
          <span style="color: #333333">}</span>
      <span style="color: #333333">}</span>
      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">request_LED</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span> LED_Status<span style="color: #333333">,</span> String user_id<span style="color: #333333">)</span> <span style="color: #333333">{</span>
          String url <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;http://raphab-test1.p-e.kr:8090/LED&quot;</span><span style="color: #333333">;</span>
  
          <span style="color: #888888">// JSON형식으로 데이터 통신을 진행합니다!</span>
          JSONObject LED_Status_json <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JSONObject<span style="color: #333333">();</span>
          <span style="color: #008800; font-weight: bold">try</span> <span style="color: #333333">{</span>
  
              <span style="color: #888888">// user_id 값을 JSON에 추가합니다.</span>
              LED_Status_json<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;user_id&quot;</span><span style="color: #333333">,</span> user_id<span style="color: #333333">);</span>
              LED_Status_json<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;LED_Status&quot;</span><span style="color: #333333">,</span> LED_Status<span style="color: #333333">);</span>
  
              <span style="color: #008800; font-weight: bold">final</span> RequestQueue requestQueue <span style="color: #333333">=</span> Volley<span style="color: #333333">.</span><span style="color: #0000CC">newRequestQueue</span><span style="color: #333333">(</span>Use_Enable_Setting<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">);</span>
              <span style="color: #008800; font-weight: bold">final</span> JsonObjectRequest jsonObjectRequest <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JsonObjectRequest<span style="color: #333333">(</span>Request<span style="color: #333333">.</span><span style="color: #0000CC">Method</span><span style="color: #333333">.</span><span style="color: #0000CC">POST</span><span style="color: #333333">,</span> url<span style="color: #333333">,</span> LED_Status_json<span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">Listener</span><span style="color: #333333">&lt;</span>JSONObject<span style="color: #333333">&gt;()</span> <span style="color: #333333">{</span>
                  <span style="color: #555555; font-weight: bold">@Override</span>
                  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onResponse</span><span style="color: #333333">(</span>JSONObject response<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                      <span style="color: #888888">// 응답 처리 로직</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">},</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">ErrorListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
                  <span style="color: #555555; font-weight: bold">@Override</span>
                  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onErrorResponse</span><span style="color: #333333">(</span>VolleyError error<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                      error<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
                      showToast<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;통신 오류 발생&quot;</span><span style="color: #333333">);</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">});</span>
              jsonObjectRequest<span style="color: #333333">.</span><span style="color: #0000CC">setRetryPolicy</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> DefaultRetryPolicy<span style="color: #333333">(</span>DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_TIMEOUT_MS</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_MAX_RETRIES</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_BACKOFF_MULT</span><span style="color: #333333">));</span>
              requestQueue<span style="color: #333333">.</span><span style="color: #0000CC">add</span><span style="color: #333333">(</span>jsonObjectRequest<span style="color: #333333">);</span>
  
          <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span> <span style="color: #333333">{</span>
              e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
          <span style="color: #333333">}</span>
      <span style="color: #333333">}</span>
  
      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">request_disinfection</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span> disinfection_Status<span style="color: #333333">,</span>String user_id<span style="color: #333333">)</span> <span style="color: #333333">{</span>
          String url <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;http://raphab-test1.p-e.kr:8090/disinfection&quot;</span><span style="color: #333333">;</span> <span style="color: #888888">// 엔드포인트 지정 LED이라는</span>
  
          <span style="color: #888888">// JSON형식으로 데이터 통신을 진행합니다!</span>
          JSONObject disinfection_Status_json <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JSONObject<span style="color: #333333">();</span>
          <span style="color: #008800; font-weight: bold">try</span> <span style="color: #333333">{</span>
              <span style="color: #888888">// 입력해둔 edittext의 id와 pw값을 받아와 put해줍니다 : 데이터를 json형식으로 바꿔 넣어주었습니다.</span>
              <span style="color: #888888">// user_id 값을 JSON에 추가합니다.</span>
              disinfection_Status_json<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;user_id&quot;</span><span style="color: #333333">,</span> user_id<span style="color: #333333">);</span>
              disinfection_Status_json<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;disinfection_Status&quot;</span><span style="color: #333333">,</span> disinfection_Status<span style="color: #333333">);</span>
  
              <span style="color: #888888">// 이제 전송해볼까요?</span>
              <span style="color: #008800; font-weight: bold">final</span> RequestQueue requestQueue <span style="color: #333333">=</span> Volley<span style="color: #333333">.</span><span style="color: #0000CC">newRequestQueue</span><span style="color: #333333">(</span>Use_Enable_Setting<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">);</span>
              <span style="color: #008800; font-weight: bold">final</span> JsonObjectRequest jsonObjectRequest <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JsonObjectRequest<span style="color: #333333">(</span>Request<span style="color: #333333">.</span><span style="color: #0000CC">Method</span><span style="color: #333333">.</span><span style="color: #0000CC">POST</span><span style="color: #333333">,</span> url<span style="color: #333333">,</span> disinfection_Status_json<span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">Listener</span><span style="color: #333333">&lt;</span>JSONObject<span style="color: #333333">&gt;()</span> <span style="color: #333333">{</span>
  
                  <span style="color: #888888">// 데이터 전달을 끝내고 이제 그 응답을 받을 차례입니다.</span>
                  <span style="color: #555555; font-weight: bold">@Override</span>
                  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onResponse</span><span style="color: #333333">(</span>JSONObject response<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                      <span style="color: #008800; font-weight: bold">try</span> <span style="color: #333333">{</span>
                          String disinfection_change_check <span style="color: #333333">=</span> response<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;LED_change_check&quot;</span><span style="color: #333333">);</span>
                          <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;success&quot;</span><span style="color: #333333">.</span><span style="color: #0000CC">equals</span><span style="color: #333333">(</span>disinfection_change_check<span style="color: #333333">))</span> <span style="color: #333333">{</span>
                              showToast<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;LED 상태 변경 성공&quot;</span><span style="color: #333333">);</span>
                          <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;failed&quot;</span><span style="color: #333333">.</span><span style="color: #0000CC">equals</span><span style="color: #333333">(</span>disinfection_change_check<span style="color: #333333">))</span> <span style="color: #333333">{</span>
                              showToast<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;LED 상태 변경 실패&quot;</span><span style="color: #333333">);</span>
                          <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #333333">{</span>
                              showToast<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;응답 데이터에 LED_change_check가 없습니다.&quot;</span><span style="color: #333333">);</span>
                          <span style="color: #333333">}</span>
                      <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                          e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
                      <span style="color: #333333">}</span>
                  <span style="color: #333333">}</span>
  
                  <span style="color: #888888">// 서버로 데이터 전달 및 응답 받기에 실패한 경우 아래 코드가 실행됩니다.</span>
              <span style="color: #333333">},</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">ErrorListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
                  <span style="color: #555555; font-weight: bold">@Override</span>
                  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onErrorResponse</span><span style="color: #333333">(</span>VolleyError error<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                      error<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
                      showToast<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;통신 오류 발생&quot;</span><span style="color: #333333">);</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">});</span>
              jsonObjectRequest<span style="color: #333333">.</span><span style="color: #0000CC">setRetryPolicy</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> DefaultRetryPolicy<span style="color: #333333">(</span>DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_TIMEOUT_MS</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_MAX_RETRIES</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_BACKOFF_MULT</span><span style="color: #333333">));</span>
              requestQueue<span style="color: #333333">.</span><span style="color: #0000CC">add</span><span style="color: #333333">(</span>jsonObjectRequest<span style="color: #333333">);</span>
  
          <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span> <span style="color: #333333">{</span>
              e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
          <span style="color: #333333">}</span>
      <span style="color: #333333">}</span>
  
  
      <span style="color: #888888">// Toast 메시지를 띄우는 메서드</span>
      <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">showToast</span><span style="color: #333333">(</span>String message<span style="color: #333333">)</span> <span style="color: #333333">{</span>
          Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span>Use_Enable_Setting<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">,</span> message<span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
      <span style="color: #333333">}</span>
  <span style="color: #333333">}</span>
  </pre></td></tr></table></div>
  <h1>Space_Create</h1>
  <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">  1
    2
    3
    4
    5
    6
    7
    8
    9
   10
   11
   12
   13
   14
   15
   16
   17
   18
   19
   20
   21
   22
   23
   24
   25
   26
   27
   28
   29
   30
   31
   32
   33
   34
   35
   36
   37
   38
   39
   40
   41
   42
   43
   44
   45
   46
   47
   48
   49
   50
   51
   52
   53
   54
   55
   56
   57
   58
   59
   60
   61
   62
   63
   64
   65
   66
   67
   68
   69
   70
   71
   72
   73
   74
   75
   76
   77
   78
   79
   80
   81
   82
   83
   84
   85
   86
   87
   88
   89
   90
   91
   92
   93
   94
   95
   96
   97
   98
   99
  100
  101
  102
  103
  104
  105
  106
  107
  108
  109
  110
  111
  112
  113
  114
  115
  116
  117
  118
  119
  120
  121
  122
  123
  124
  125
  126
  127
  128
  129
  130
  131
  132
  133
  134
  135
  136
  137
  138
  139
  140
  141
  142
  143
  144
  145
  146
  147
  148
  149
  150
  151
  152
  153
  154
  155
  156
  157
  158
  159
  160
  161
  162
  163
  164
  165
  166
  167
  168
  169
  170
  171
  172
  173
  174
  175
  176
  177
  178
  179
  180
  181
  182
  183
  184
  185
  186
  187
  188
  189
  190
  191
  192
  193
  194
  195
  196
  197
  198
  199
  200
  201
  202
  203
  204
  205
  206
  207
  208
  209
  210
  211
  212
  213
  214</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">package</span> com<span style="color: #333333">.</span><span style="color: #0000CC">example</span><span style="color: #333333">.</span><span style="color: #0000CC">raphab</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.Context</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.DialogInterface</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.SharedPreferences</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.graphics.Color</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.os.Bundle</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.util.Log</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.view.LayoutInflater</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.view.View</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.Button</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.EditText</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.Toast</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">androidx.appcompat.app.AlertDialog</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">androidx.appcompat.app.AppCompatActivity</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">org.json.JSONArray</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">org.json.JSONException</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">org.json.JSONObject</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">java.util.ArrayList</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">java.util.List</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Space_Create</span> <span style="color: #008800; font-weight: bold">extends</span> AppCompatActivity <span style="color: #008800; font-weight: bold">implements</span> ShapeClickInterface<span style="color: #333333">{</span>
  
      DrawingView drawingView<span style="color: #333333">;</span>
      Button createRectangleBtn<span style="color: #333333">;</span>
      Button save_btn<span style="color: #333333">;</span>
      Button load_btn<span style="color: #333333">;</span>
      Button delete_btn<span style="color: #333333">;</span>
  <span style="color: #888888">//    Button name_btn;</span>
  
      <span style="color: #555555; font-weight: bold">@Override</span>
      <span style="color: #008800; font-weight: bold">protected</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onCreate</span><span style="color: #333333">(</span>Bundle savedInstanceState<span style="color: #333333">)</span> <span style="color: #333333">{</span>
          <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">.</span><span style="color: #0000CC">onCreate</span><span style="color: #333333">(</span>savedInstanceState<span style="color: #333333">);</span>
          setContentView<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">layout</span><span style="color: #333333">.</span><span style="color: #0000CC">activity_space_create</span><span style="color: #333333">);</span>
  
          init<span style="color: #333333">();</span>
          drawingView<span style="color: #333333">.</span><span style="color: #0000CC">setClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">);</span>
          drawingView<span style="color: #333333">.</span><span style="color: #0000CC">setDeleteButtonChangeListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> DrawingView<span style="color: #333333">.</span><span style="color: #0000CC">DeleteButtonChangeListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
              <span style="color: #555555; font-weight: bold">@Override</span>
              <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onChangeButtonColor</span><span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">boolean</span> deleteMode<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                  <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>deleteMode<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                      delete_btn<span style="color: #333333">.</span><span style="color: #0000CC">setBackgroundColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">RED</span><span style="color: #333333">);</span> <span style="color: #888888">// 삭제 모드일 때 버튼 색을 빨간색으로 설정</span>
                  <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #333333">{</span>
                      delete_btn<span style="color: #333333">.</span><span style="color: #0000CC">setBackgroundColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">parseColor</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;#03A9F4&quot;</span><span style="color: #333333">));</span> <span style="color: #888888">// 일반 모드일 때 버튼 색을 파란색으로 설정</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">});</span>
          createRectangleBtn<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span>
          <span style="color: #333333">{</span>
              <span style="color: #555555; font-weight: bold">@Override</span>
              <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View v<span style="color: #333333">)</span>
              <span style="color: #333333">{</span>
                  showShapeNamePopup<span style="color: #333333">();</span> <span style="color: #888888">// 팝업 창 띄우기</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">});</span>
  
          save_btn<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
              <span style="color: #555555; font-weight: bold">@Override</span>
              <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                  saveRectangleData<span style="color: #333333">();</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">});</span>
  
          load_btn<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
              <span style="color: #555555; font-weight: bold">@Override</span>
              <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                  loadRectangleData<span style="color: #333333">();</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">});</span>
          delete_btn<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
              <span style="color: #555555; font-weight: bold">@Override</span>
              <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                  <span style="color: #333399; font-weight: bold">boolean</span> deleteMode <span style="color: #333333">=</span> drawingView<span style="color: #333333">.</span><span style="color: #0000CC">isDeleteMode</span><span style="color: #333333">();</span>
                  drawingView<span style="color: #333333">.</span><span style="color: #0000CC">setDeleteMode</span><span style="color: #333333">(!</span>deleteMode<span style="color: #333333">);</span> <span style="color: #888888">// 삭제 모드 상태를 토글합니다.</span>
  
                  <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(!</span>deleteMode<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                      delete_btn<span style="color: #333333">.</span><span style="color: #0000CC">setBackgroundColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">RED</span><span style="color: #333333">);</span> <span style="color: #888888">// 삭제 모드일 때 버튼 색을 빨간색으로 변경</span>
                  <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #333333">{</span>
                      delete_btn<span style="color: #333333">.</span><span style="color: #0000CC">setBackgroundColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">parseColor</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;#03A9F4&quot;</span><span style="color: #333333">));</span> <span style="color: #888888">// 일반 모드일 때 버튼 색을 원래 색상으로 변경</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">});</span>
  
          <span style="color: #888888">// 초기화 시 버튼 색을 설정</span>
          <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>drawingView<span style="color: #333333">.</span><span style="color: #0000CC">isDeleteMode</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
              delete_btn<span style="color: #333333">.</span><span style="color: #0000CC">setBackgroundColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">RED</span><span style="color: #333333">);</span> <span style="color: #888888">// 삭제 모드일 때 버튼 색을 빨간색으로 설정</span>
          <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #333333">{</span>
              delete_btn<span style="color: #333333">.</span><span style="color: #0000CC">setBackgroundColor</span><span style="color: #333333">(</span>Color<span style="color: #333333">.</span><span style="color: #0000CC">parseColor</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;#03A9F4&quot;</span><span style="color: #333333">));</span> <span style="color: #888888">// 일반 모드일 때 버튼 색을 파란색으로 설정</span>
          <span style="color: #333333">}</span>
  
  
  <span style="color: #888888">//        name_btn.setOnClickListener(new View.OnClickListener() {</span>
  <span style="color: #888888">//            @Override</span>
  <span style="color: #888888">//            public void onClick(View view) {</span>
  <span style="color: #888888">//</span>
  <span style="color: #888888">//            }</span>
  <span style="color: #888888">//        });</span>
      <span style="color: #333333">}</span>
      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">init</span><span style="color: #333333">()</span>
      <span style="color: #333333">{</span>
          createRectangleBtn <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">create_circle_btn</span><span style="color: #333333">);</span>
          drawingView <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">drawing_view</span><span style="color: #333333">);</span>
          save_btn <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">drawing_save</span><span style="color: #333333">);</span>
          load_btn <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">drawing_load</span><span style="color: #333333">);</span>
          delete_btn <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">drawing_delete</span><span style="color: #333333">);</span>
  <span style="color: #888888">//        name_btn = findViewById(R.id.create_name_btn);</span>
      <span style="color: #333333">}</span>
  
      <span style="color: #888888">// 도형 이름 입력을 위한 팝업 창 띄우기</span>
      <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">showShapeNamePopup</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
          LayoutInflater inflater <span style="color: #333333">=</span> <span style="color: #333333">(</span>LayoutInflater<span style="color: #333333">)</span> getSystemService<span style="color: #333333">(</span>Context<span style="color: #333333">.</span><span style="color: #0000CC">LAYOUT_INFLATER_SERVICE</span><span style="color: #333333">);</span>
          View popupView <span style="color: #333333">=</span> inflater<span style="color: #333333">.</span><span style="color: #0000CC">inflate</span><span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">layout</span><span style="color: #333333">.</span><span style="color: #0000CC">popup_shape_name</span><span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">null</span><span style="color: #333333">);</span>
  
          EditText editTextShapeName <span style="color: #333333">=</span> popupView<span style="color: #333333">.</span><span style="color: #0000CC">findViewById</span><span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">editTextShapeName</span><span style="color: #333333">);</span>
  
          AlertDialog<span style="color: #333333">.</span><span style="color: #0000CC">Builder</span> alertDialogBuilder <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> AlertDialog<span style="color: #333333">.</span><span style="color: #0000CC">Builder</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">);</span>
          alertDialogBuilder<span style="color: #333333">.</span><span style="color: #0000CC">setView</span><span style="color: #333333">(</span>popupView<span style="color: #333333">);</span>
          alertDialogBuilder
                  <span style="color: #333333">.</span><span style="color: #0000CC">setCancelable</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">)</span>
                  <span style="color: #333333">.</span><span style="color: #0000CC">setPositiveButton</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;저장&quot;</span><span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> DialogInterface<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
                      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>DialogInterface dialog<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">int</span> id<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                          String shapeName <span style="color: #333333">=</span> editTextShapeName<span style="color: #333333">.</span><span style="color: #0000CC">getText</span><span style="color: #333333">().</span><span style="color: #0000CC">toString</span><span style="color: #333333">();</span>
                          <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(!</span>shapeName<span style="color: #333333">.</span><span style="color: #0000CC">isEmpty</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
                              <span style="color: #888888">// 도형 이름 설정</span>
                              drawingView<span style="color: #333333">.</span><span style="color: #0000CC">setShapeName</span><span style="color: #333333">(</span>shapeName<span style="color: #333333">);</span>
                              <span style="color: #888888">// 도형 생성</span>
                              drawingView<span style="color: #333333">.</span><span style="color: #0000CC">createRectangle</span><span style="color: #333333">();</span>
                          <span style="color: #333333">}</span>
                      <span style="color: #333333">}</span>
                  <span style="color: #333333">})</span>
                  <span style="color: #333333">.</span><span style="color: #0000CC">setNegativeButton</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;취소&quot;</span><span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> DialogInterface<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
                      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>DialogInterface dialog<span style="color: #333333">,</span> <span style="color: #333399; font-weight: bold">int</span> id<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                          dialog<span style="color: #333333">.</span><span style="color: #0000CC">dismiss</span><span style="color: #333333">();</span>
                      <span style="color: #333333">}</span>
                  <span style="color: #333333">});</span>
  
          AlertDialog alertDialog <span style="color: #333333">=</span> alertDialogBuilder<span style="color: #333333">.</span><span style="color: #0000CC">create</span><span style="color: #333333">();</span>
          alertDialog<span style="color: #333333">.</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
      <span style="color: #333333">}</span>
  
  
      <span style="color: #888888">// 사각형 데이터 저장</span>
      <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">saveRectangleData</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
          SharedPreferences sharedPreferences <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPrefs&quot;</span><span style="color: #333333">,</span> Context<span style="color: #333333">.</span><span style="color: #0000CC">MODE_PRIVATE</span><span style="color: #333333">);</span>
          SharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">Editor</span> editor <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">edit</span><span style="color: #333333">();</span>
  
          JSONArray jsonArray <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JSONArray<span style="color: #333333">();</span>
          <span style="color: #008800; font-weight: bold">for</span> <span style="color: #333333">(</span>RectangleInfoData rectangle <span style="color: #333333">:</span> drawingView<span style="color: #333333">.</span><span style="color: #0000CC">getDrawnRectangleList</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
              JSONObject jsonObject <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JSONObject<span style="color: #333333">();</span>
              <span style="color: #008800; font-weight: bold">try</span> <span style="color: #333333">{</span>
                  jsonObject<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;rectangleX&quot;</span><span style="color: #333333">,</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleX</span><span style="color: #333333">());</span>
                  jsonObject<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;rectangleY&quot;</span><span style="color: #333333">,</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getRectangleY</span><span style="color: #333333">());</span>
                  jsonObject<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;width&quot;</span><span style="color: #333333">,</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getWidth</span><span style="color: #333333">());</span>
                  jsonObject<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;height&quot;</span><span style="color: #333333">,</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getHeight</span><span style="color: #333333">());</span>
                  jsonObject<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;shapeName&quot;</span><span style="color: #333333">,</span> rectangle<span style="color: #333333">.</span><span style="color: #0000CC">getShapeName</span><span style="color: #333333">());</span>
                  jsonArray<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span>jsonObject<span style="color: #333333">);</span>
              <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                  e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">}</span>
  
          editor<span style="color: #333333">.</span><span style="color: #0000CC">putString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;rectangleData&quot;</span><span style="color: #333333">,</span> jsonArray<span style="color: #333333">.</span><span style="color: #0000CC">toString</span><span style="color: #333333">());</span>
          editor<span style="color: #333333">.</span><span style="color: #0000CC">apply</span><span style="color: #333333">();</span>
  
          Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">,</span> <span style="background-color: #fff0f0">&quot;Data saved successfully&quot;</span><span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
      <span style="color: #333333">}</span>
  
  
      <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">loadRectangleData</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
          SharedPreferences sharedPreferences <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPrefs&quot;</span><span style="color: #333333">,</span> Context<span style="color: #333333">.</span><span style="color: #0000CC">MODE_PRIVATE</span><span style="color: #333333">);</span>
          String jsonData <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;rectangleData&quot;</span><span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">null</span><span style="color: #333333">);</span>
  
          <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>jsonData <span style="color: #333333">!=</span> <span style="color: #008800; font-weight: bold">null</span><span style="color: #333333">)</span> <span style="color: #333333">{</span>
              <span style="color: #008800; font-weight: bold">try</span> <span style="color: #333333">{</span>
                  JSONArray jsonArray <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JSONArray<span style="color: #333333">(</span>jsonData<span style="color: #333333">);</span>
                  List<span style="color: #333333">&lt;</span>RectangleInfoData<span style="color: #333333">&gt;</span> drawnRectangleList <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> ArrayList<span style="color: #333333">&lt;&gt;();</span>
  
                  <span style="color: #008800; font-weight: bold">for</span> <span style="color: #333333">(</span><span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">;</span> i <span style="color: #333333">&lt;</span> jsonArray<span style="color: #333333">.</span><span style="color: #0000CC">length</span><span style="color: #333333">();</span> i<span style="color: #333333">++)</span> <span style="color: #333333">{</span>
                      JSONObject jsonObject <span style="color: #333333">=</span> jsonArray<span style="color: #333333">.</span><span style="color: #0000CC">getJSONObject</span><span style="color: #333333">(</span>i<span style="color: #333333">);</span>
                      <span style="color: #333399; font-weight: bold">int</span> rectangleX <span style="color: #333333">=</span> jsonObject<span style="color: #333333">.</span><span style="color: #0000CC">getInt</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;rectangleX&quot;</span><span style="color: #333333">);</span>
                      <span style="color: #333399; font-weight: bold">int</span> rectangleY <span style="color: #333333">=</span> jsonObject<span style="color: #333333">.</span><span style="color: #0000CC">getInt</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;rectangleY&quot;</span><span style="color: #333333">);</span>
                      <span style="color: #333399; font-weight: bold">int</span> width <span style="color: #333333">=</span> jsonObject<span style="color: #333333">.</span><span style="color: #0000CC">getInt</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;width&quot;</span><span style="color: #333333">);</span>
                      <span style="color: #333399; font-weight: bold">int</span> height <span style="color: #333333">=</span> jsonObject<span style="color: #333333">.</span><span style="color: #0000CC">getInt</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;height&quot;</span><span style="color: #333333">);</span>
                      String shapeName <span style="color: #333333">=</span> jsonObject<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;shapeName&quot;</span><span style="color: #333333">);</span>
  
                      RectangleInfoData rectangle <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> RectangleInfoData<span style="color: #333333">(</span>rectangleX<span style="color: #333333">,</span> rectangleY<span style="color: #333333">,</span> width<span style="color: #333333">,</span> height<span style="color: #333333">);</span>
                      rectangle<span style="color: #333333">.</span><span style="color: #0000CC">setShapeName</span><span style="color: #333333">(</span>shapeName<span style="color: #333333">);</span>
                      drawnRectangleList<span style="color: #333333">.</span><span style="color: #0000CC">add</span><span style="color: #333333">(</span>rectangle<span style="color: #333333">);</span>
                  <span style="color: #333333">}</span>
  
                  drawingView<span style="color: #333333">.</span><span style="color: #0000CC">setDrawnRectangleList</span><span style="color: #333333">(</span>drawnRectangleList<span style="color: #333333">);</span>
  
                  Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">,</span> <span style="background-color: #fff0f0">&quot;Data loaded successfully&quot;</span><span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
              <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                  e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #333333">{</span>
              Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">,</span> <span style="background-color: #fff0f0">&quot;No saved data found&quot;</span><span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
          <span style="color: #333333">}</span>
      <span style="color: #333333">}</span>
  
      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">rectangle_delete</span><span style="color: #333333">()</span>
      <span style="color: #333333">{</span>
  
      <span style="color: #333333">}</span>
  
      <span style="color: #555555; font-weight: bold">@Override</span>
      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onRectangleClick</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
  
      <span style="color: #333333">}</span>
  <span style="color: #333333">}</span>
  </pre></td></tr></table></div>
  <h1>Signup</h1>
  <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">  1
    2
    3
    4
    5
    6
    7
    8
    9
   10
   11
   12
   13
   14
   15
   16
   17
   18
   19
   20
   21
   22
   23
   24
   25
   26
   27
   28
   29
   30
   31
   32
   33
   34
   35
   36
   37
   38
   39
   40
   41
   42
   43
   44
   45
   46
   47
   48
   49
   50
   51
   52
   53
   54
   55
   56
   57
   58
   59
   60
   61
   62
   63
   64
   65
   66
   67
   68
   69
   70
   71
   72
   73
   74
   75
   76
   77
   78
   79
   80
   81
   82
   83
   84
   85
   86
   87
   88
   89
   90
   91
   92
   93
   94
   95
   96
   97
   98
   99
  100
  101
  102
  103
  104
  105
  106
  107
  108
  109
  110
  111
  112
  113
  114
  115
  116
  117
  118
  119
  120
  121
  122
  123
  124
  125
  126
  127
  128
  129
  130</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">package</span> com<span style="color: #333333">.</span><span style="color: #0000CC">example</span><span style="color: #333333">.</span><span style="color: #0000CC">raphab</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">androidx.appcompat.app.AppCompatActivity</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.Context</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.SharedPreferences</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.os.Bundle</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.view.View</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.Button</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.EditText</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.Toast</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.DefaultRetryPolicy</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.Request</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.RequestQueue</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.Response</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.VolleyError</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.toolbox.JsonObjectRequest</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.toolbox.Volley</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">org.json.JSONException</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">org.json.JSONObject</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Signup</span> <span style="color: #008800; font-weight: bold">extends</span> AppCompatActivity <span style="color: #333333">{</span>
  
      EditText sign_edit_id<span style="color: #333333">;</span>
      EditText sign_edit_pw<span style="color: #333333">;</span>
      Button signup_btn<span style="color: #333333">;</span>
      String id<span style="color: #333333">;</span>
      String pw<span style="color: #333333">;</span>
  
      <span style="color: #555555; font-weight: bold">@Override</span>
      <span style="color: #008800; font-weight: bold">protected</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onCreate</span><span style="color: #333333">(</span>Bundle savedInstanceState<span style="color: #333333">)</span> <span style="color: #333333">{</span>
          <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">.</span><span style="color: #0000CC">onCreate</span><span style="color: #333333">(</span>savedInstanceState<span style="color: #333333">);</span>
          setContentView<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">layout</span><span style="color: #333333">.</span><span style="color: #0000CC">activity_signup</span><span style="color: #333333">);</span>
          init<span style="color: #333333">();</span>
  
          signup_btn<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
              <span style="color: #555555; font-weight: bold">@Override</span>
              <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                  id <span style="color: #333333">=</span> sign_edit_id<span style="color: #333333">.</span><span style="color: #0000CC">getText</span><span style="color: #333333">().</span><span style="color: #0000CC">toString</span><span style="color: #333333">();</span>
                  pw <span style="color: #333333">=</span> sign_edit_pw<span style="color: #333333">.</span><span style="color: #0000CC">getText</span><span style="color: #333333">().</span><span style="color: #0000CC">toString</span><span style="color: #333333">();</span>
  
                  <span style="color: #888888">// 공백 포함 여부 체크</span>
                  <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>id<span style="color: #333333">.</span><span style="color: #0000CC">contains</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot; &quot;</span><span style="color: #333333">)</span> <span style="color: #333333">||</span> pw<span style="color: #333333">.</span><span style="color: #0000CC">contains</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot; &quot;</span><span style="color: #333333">))</span> <span style="color: #333333">{</span>
                      <span style="color: #888888">// 공백이 있는 경우 처리</span>
                      Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span>getApplicationContext<span style="color: #333333">(),</span> <span style="background-color: #fff0f0">&quot;공백은 입력할 수 없습니다.&quot;</span><span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
                  <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(!</span>id<span style="color: #333333">.</span><span style="color: #0000CC">isEmpty</span><span style="color: #333333">()</span> <span style="color: #333333">&amp;&amp;</span> <span style="color: #333333">!</span>pw<span style="color: #333333">.</span><span style="color: #0000CC">isEmpty</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
                      Signup<span style="color: #333333">(</span>id<span style="color: #333333">,</span> pw<span style="color: #333333">);</span>
                  <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>id<span style="color: #333333">.</span><span style="color: #0000CC">isEmpty</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
                      <span style="color: #888888">// id가 비어있을 경우 처리</span>
                      Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span>getApplicationContext<span style="color: #333333">(),</span> <span style="background-color: #fff0f0">&quot;아이디를 입력하세요.&quot;</span><span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
                  <span style="color: #333333">}</span> <span style="color: #008800; font-weight: bold">else</span> <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>pw<span style="color: #333333">.</span><span style="color: #0000CC">isEmpty</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
                      <span style="color: #888888">// pw가 비어있을 경우 처리</span>
                      Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span>getApplicationContext<span style="color: #333333">(),</span> <span style="background-color: #fff0f0">&quot;비밀번호를 입력하세요.&quot;</span><span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">});</span>
  
  
      <span style="color: #333333">}</span>
  
      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">init</span><span style="color: #333333">()</span>
      <span style="color: #333333">{</span>
          sign_edit_id <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">signup_id</span><span style="color: #333333">);</span>
          sign_edit_pw <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">signup_pw</span><span style="color: #333333">);</span>
          signup_btn <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">signup_btn</span><span style="color: #333333">);</span>
      <span style="color: #333333">}</span>
  
      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">Signup</span><span style="color: #333333">(</span>String ID<span style="color: #333333">,</span> String PW<span style="color: #333333">)</span>
      <span style="color: #333333">{</span>
          String url <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;http://raphab-test1.p-e.kr:8090/register&quot;</span><span style="color: #333333">;</span><span style="color: #888888">//회원가입의 엔드포인트 지정</span>
  
          <span style="color: #888888">// JSON형식으로 데이터 통신을 진행합니다!</span>
          JSONObject signup_json <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JSONObject<span style="color: #333333">();</span>
          <span style="color: #008800; font-weight: bold">try</span>
          <span style="color: #333333">{</span>
              <span style="color: #888888">// 입력해둔 edittext의 id와 pw값을 받아와 put해줍니다 : 데이터를 json형식으로 바꿔 넣어주었습니다.</span>
              signup_json<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;id&quot;</span><span style="color: #333333">,</span> ID<span style="color: #333333">);</span>
              signup_json<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;password&quot;</span><span style="color: #333333">,</span> PW<span style="color: #333333">);</span>
  
              <span style="color: #888888">// 이제 전송해볼까요?</span>
              <span style="color: #008800; font-weight: bold">final</span> RequestQueue requestQueue <span style="color: #333333">=</span> Volley<span style="color: #333333">.</span><span style="color: #0000CC">newRequestQueue</span><span style="color: #333333">(</span>Signup<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">);</span>
              <span style="color: #008800; font-weight: bold">final</span> JsonObjectRequest jsonObjectRequest <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JsonObjectRequest<span style="color: #333333">(</span>Request<span style="color: #333333">.</span><span style="color: #0000CC">Method</span><span style="color: #333333">.</span><span style="color: #0000CC">POST</span><span style="color: #333333">,</span> url<span style="color: #333333">,</span> signup_json<span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">Listener</span><span style="color: #333333">&lt;</span>JSONObject<span style="color: #333333">&gt;()</span>
              <span style="color: #333333">{</span>
  
                  <span style="color: #888888">// 데이터 전달을 끝내고 이제 그 응답을 받을 차례입니다.</span>
                  <span style="color: #555555; font-weight: bold">@Override</span>
                  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onResponse</span><span style="color: #333333">(</span>JSONObject response<span style="color: #333333">)</span>
                  <span style="color: #333333">{</span>
                      <span style="color: #008800; font-weight: bold">try</span>
                      <span style="color: #333333">{</span>
                          <span style="color: #888888">// 서버로부터 받은 json형식의 응답을 받아</span>
                          <span style="color: #888888">//String resultId = response.getString(&quot;approve_id&quot;);</span>
                          <span style="color: #888888">//String resultPassword = response.getString(&quot;approve_pw&quot;);</span>
  
                          String  signup_success_check <span style="color: #333333">=</span> response<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;registration_success&quot;</span><span style="color: #333333">);</span>
                          <span style="color: #008800; font-weight: bold">if</span><span style="color: #333333">(</span>signup_success_check<span style="color: #333333">.</span><span style="color: #0000CC">equals</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;true&quot;</span><span style="color: #333333">))</span>
                          <span style="color: #333333">{</span>
                              Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span>getApplicationContext<span style="color: #333333">(),</span> <span style="background-color: #fff0f0">&quot;회원가입 성공&quot;</span><span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
                          <span style="color: #333333">}</span>
                          <span style="color: #008800; font-weight: bold">else</span>
                          <span style="color: #333333">{</span>
                              Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span>getApplicationContext<span style="color: #333333">(),</span> <span style="background-color: #fff0f0">&quot;회원가입 실패&quot;</span><span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
                          <span style="color: #333333">}</span>
                      <span style="color: #333333">}</span>
                      <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span>
                      <span style="color: #333333">{</span>
                          e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
                      <span style="color: #333333">}</span>
                  <span style="color: #333333">}</span>
                  <span style="color: #888888">// 서버로 데이터 전달 및 응답 받기에 실패한 경우 아래 코드가 실행됩니다.</span>
              <span style="color: #333333">}</span>
                      <span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">ErrorListener</span><span style="color: #333333">()</span>
              <span style="color: #333333">{</span>
                  <span style="color: #555555; font-weight: bold">@Override</span>
                  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onErrorResponse</span><span style="color: #333333">(</span>VolleyError error<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                      error<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">});</span>
              jsonObjectRequest<span style="color: #333333">.</span><span style="color: #0000CC">setRetryPolicy</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> DefaultRetryPolicy<span style="color: #333333">(</span>DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_TIMEOUT_MS</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_MAX_RETRIES</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_BACKOFF_MULT</span><span style="color: #333333">));</span>
              requestQueue<span style="color: #333333">.</span><span style="color: #0000CC">add</span><span style="color: #333333">(</span>jsonObjectRequest<span style="color: #333333">);</span>
  
          <span style="color: #333333">}</span>
          <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span>
          <span style="color: #333333">{</span>
              e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
          <span style="color: #333333">}</span>
      <span style="color: #333333">}</span>
  <span style="color: #333333">}</span>
  </pre></td></tr></table></div>
  
  <h1>#Setting</h1>
  <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">package</span> com<span style="color: #333333">.</span><span style="color: #0000CC">example</span><span style="color: #333333">.</span><span style="color: #0000CC">raphab</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">androidx.appcompat.app.AppCompatActivity</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.Context</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.Intent</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.SharedPreferences</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.os.Bundle</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.view.View</span><span style="color: #333333">;</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.Button</span><span style="color: #333333">;</span>

<span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Setting</span> <span style="color: #008800; font-weight: bold">extends</span> AppCompatActivity <span style="color: #333333">{</span>

    Button Logout<span style="color: #333333">;</span>
    Button Language<span style="color: #333333">;</span>
    <span style="color: #555555; font-weight: bold">@Override</span>
    <span style="color: #008800; font-weight: bold">protected</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onCreate</span><span style="color: #333333">(</span>Bundle savedInstanceState<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">.</span><span style="color: #0000CC">onCreate</span><span style="color: #333333">(</span>savedInstanceState<span style="color: #333333">);</span>
        setContentView<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">layout</span><span style="color: #333333">.</span><span style="color: #0000CC">activity_setting</span><span style="color: #333333">);</span>
        init<span style="color: #333333">();</span>

        Language<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
            <span style="color: #555555; font-weight: bold">@Override</span>
            <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span>
            <span style="color: #333333">{</span>
                Intent intent <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Intent<span style="color: #333333">(</span>Setting<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">,</span> Language<span style="color: #333333">.</span><span style="color: #0000CC">class</span><span style="color: #333333">);</span>
                startActivity<span style="color: #333333">(</span>intent<span style="color: #333333">);</span><span style="color: #888888">//자바 동작을 메인 액티비티에서 제품 등록 qr코드로 바꿔라 -&gt; 이후 제품등록 qr코드 자바코드가 돌아가면 자동으로 xml을 실행하는 구조</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">});</span>

        Logout<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
            <span style="color: #555555; font-weight: bold">@Override</span>
            <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span>
            <span style="color: #333333">{</span>
                logout<span style="color: #333333">();</span>
            <span style="color: #333333">}</span>
        <span style="color: #333333">});</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">init</span><span style="color: #333333">()</span>
    <span style="color: #333333">{</span>
        Logout <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">Logout</span><span style="color: #333333">);</span>
        Language <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">Language</span><span style="color: #333333">);</span>
    <span style="color: #333333">}</span>

    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">logout</span><span style="color: #333333">()</span>
    <span style="color: #333333">{</span>
        <span style="color: #888888">// 토큰을 SharedPreferences에서 제거</span>
        SharedPreferences sharedPreferences <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPref&quot;</span><span style="color: #333333">,</span> Context<span style="color: #333333">.</span><span style="color: #0000CC">MODE_PRIVATE</span><span style="color: #333333">);</span>
        SharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">Editor</span> editor <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">edit</span><span style="color: #333333">();</span>
        editor<span style="color: #333333">.</span><span style="color: #0000CC">remove</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;token&quot;</span><span style="color: #333333">);</span>

        <span style="color: #888888">// 저장된 ID, PW 정보도 제거</span>
        editor<span style="color: #333333">.</span><span style="color: #0000CC">remove</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;saved_id&quot;</span><span style="color: #333333">);</span>
        editor<span style="color: #333333">.</span><span style="color: #0000CC">remove</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;saved_pw&quot;</span><span style="color: #333333">);</span>

        <span style="color: #888888">// 자동 로그인 상태 해제</span>
        editor<span style="color: #333333">.</span><span style="color: #0000CC">putBoolean</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;auto_login&quot;</span><span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">false</span><span style="color: #333333">);</span>

        editor<span style="color: #333333">.</span><span style="color: #0000CC">apply</span><span style="color: #333333">();</span> <span style="color: #888888">// 변경사항을 적용</span>
    <span style="color: #333333">}</span>

<span style="color: #333333">}</span>
</pre></td></tr></table></div>
<h1>Login</h1>
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">  1
    2
    3
    4
    5
    6
    7
    8
    9
   10
   11
   12
   13
   14
   15
   16
   17
   18
   19
   20
   21
   22
   23
   24
   25
   26
   27
   28
   29
   30
   31
   32
   33
   34
   35
   36
   37
   38
   39
   40
   41
   42
   43
   44
   45
   46
   47
   48
   49
   50
   51
   52
   53
   54
   55
   56
   57
   58
   59
   60
   61
   62
   63
   64
   65
   66
   67
   68
   69
   70
   71
   72
   73
   74
   75
   76
   77
   78
   79
   80
   81
   82
   83
   84
   85
   86
   87
   88
   89
   90
   91
   92
   93
   94
   95
   96
   97
   98
   99
  100
  101
  102
  103
  104
  105
  106
  107
  108
  109
  110
  111
  112
  113
  114
  115
  116
  117
  118
  119
  120
  121
  122
  123
  124
  125
  126
  127
  128
  129
  130
  131
  132
  133
  134
  135
  136
  137
  138
  139
  140
  141
  142
  143
  144
  145
  146
  147
  148
  149
  150
  151
  152
  153
  154
  155
  156
  157
  158
  159
  160
  161
  162
  163
  164
  165
  166
  167
  168
  169
  170
  171
  172
  173
  174
  175
  176
  177
  178
  179
  180
  181
  182
  183
  184
  185
  186
  187
  188
  189
  190
  191
  192
  193
  194
  195
  196
  197
  198
  199
  200
  201
  202
  203
  204
  205
  206
  207
  208
  209
  210
  211
  212
  213
  214
  215
  216
  217
  218
  219
  220
  221
  222
  223
  224
  225
  226
  227
  228
  229
  230
  231
  232
  233
  234
  235
  236
  237
  238
  239
  240</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">package</span> com<span style="color: #333333">.</span><span style="color: #0000CC">example</span><span style="color: #333333">.</span><span style="color: #0000CC">raphab</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">androidx.appcompat.app.AppCompatActivity</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.Context</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.Intent</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.content.SharedPreferences</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.os.Bundle</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.util.Log</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.view.View</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.Button</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.CheckBox</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.EditText</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.TextView</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">android.widget.Toast</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.DefaultRetryPolicy</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.Request</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.RequestQueue</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.Response</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.VolleyError</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.toolbox.JsonObjectRequest</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">com.android.volley.toolbox.Volley</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">org.json.JSONException</span><span style="color: #333333">;</span>
  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">org.json.JSONObject</span><span style="color: #333333">;</span>
  
  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">Login</span> <span style="color: #008800; font-weight: bold">extends</span> AppCompatActivity
  <span style="color: #333333">{</span>
      TextView testView<span style="color: #333333">;</span>
      EditText editTextID<span style="color: #333333">;</span>
      EditText editTextPW<span style="color: #333333">;</span>
      Button buttonLogin<span style="color: #333333">;</span>
      Button Signup<span style="color: #333333">;</span>
      <span style="color: #888888">//Button tokencheck;</span>
      String id<span style="color: #333333">;</span>
      String pw<span style="color: #333333">;</span>
  
      <span style="color: #555555; font-weight: bold">@Override</span>
      <span style="color: #008800; font-weight: bold">protected</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onCreate</span><span style="color: #333333">(</span>Bundle savedInstanceState<span style="color: #333333">)</span>
      <span style="color: #333333">{</span>
          <span style="color: #008800; font-weight: bold">super</span><span style="color: #333333">.</span><span style="color: #0000CC">onCreate</span><span style="color: #333333">(</span>savedInstanceState<span style="color: #333333">);</span>
          setContentView<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">layout</span><span style="color: #333333">.</span><span style="color: #0000CC">activity_login</span><span style="color: #333333">);</span>
          init<span style="color: #333333">();</span>
  
          buttonLogin<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span>
          <span style="color: #333333">{</span>
              <span style="color: #555555; font-weight: bold">@Override</span>
              <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View v<span style="color: #333333">)</span>
              <span style="color: #333333">{</span>
                  id <span style="color: #333333">=</span> editTextID<span style="color: #333333">.</span><span style="color: #0000CC">getText</span><span style="color: #333333">().</span><span style="color: #0000CC">toString</span><span style="color: #333333">();</span>
                  pw <span style="color: #333333">=</span> editTextPW<span style="color: #333333">.</span><span style="color: #0000CC">getText</span><span style="color: #333333">().</span><span style="color: #0000CC">toString</span><span style="color: #333333">();</span>
                  requestLogin<span style="color: #333333">(</span>id<span style="color: #333333">,</span> pw<span style="color: #333333">);</span>
                  saveIDInfoToSharedPreferences<span style="color: #333333">(</span>id<span style="color: #333333">);</span>
                  CheckBox autoLoginCheckBox <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">auto_login_button</span><span style="color: #333333">);</span>
                  <span style="color: #008800; font-weight: bold">if</span> <span style="color: #333333">(</span>autoLoginCheckBox<span style="color: #333333">.</span><span style="color: #0000CC">isChecked</span><span style="color: #333333">())</span> <span style="color: #333333">{</span>
                      <span style="color: #888888">// 체크박스가 체크된 경우, 로그인 정보를 SharedPreferences에 저장</span>
                      saveLoginInfoToSharedPreferences<span style="color: #333333">(</span>pw<span style="color: #333333">);</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">});</span>
  
          Signup<span style="color: #333333">.</span><span style="color: #0000CC">setOnClickListener</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> View<span style="color: #333333">.</span><span style="color: #0000CC">OnClickListener</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
              <span style="color: #555555; font-weight: bold">@Override</span>
              <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onClick</span><span style="color: #333333">(</span>View view<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                  Intent intent <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> Intent<span style="color: #333333">(</span>Login<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">,</span> com<span style="color: #333333">.</span><span style="color: #0000CC">example</span><span style="color: #333333">.</span><span style="color: #0000CC">raphab</span><span style="color: #333333">.</span><span style="color: #0000CC">Signup</span><span style="color: #333333">.</span><span style="color: #0000CC">class</span><span style="color: #333333">);</span>
                  startActivity<span style="color: #333333">(</span>intent<span style="color: #333333">);</span>
              <span style="color: #333333">}</span>
          <span style="color: #333333">});</span>
          <span style="color: #888888">//검증 파트</span>
  <span style="color: #888888">//        tokencheck.setOnClickListener(new View.OnClickListener()</span>
  <span style="color: #888888">//        {</span>
  <span style="color: #888888">//            @Override</span>
  <span style="color: #888888">//            public void onClick(View view)</span>
  <span style="color: #888888">//            {</span>
  <span style="color: #888888">//                  Login_verification();</span>
  <span style="color: #888888">//            }</span>
  <span style="color: #888888">//        });</span>
      <span style="color: #333333">}</span>
  
      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">init</span><span style="color: #333333">()</span>
      <span style="color: #333333">{</span>
          testView <span style="color: #333333">=</span> findViewById<span style="color: #333333">((</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">test_text</span><span style="color: #333333">));</span>
          editTextID <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">editTextID</span><span style="color: #333333">);</span>
          editTextPW <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">editTextPW</span><span style="color: #333333">);</span>
          buttonLogin <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">login_button</span><span style="color: #333333">);</span>
          Signup <span style="color: #333333">=</span> findViewById<span style="color: #333333">(</span>R<span style="color: #333333">.</span><span style="color: #0000CC">id</span><span style="color: #333333">.</span><span style="color: #0000CC">register_button</span><span style="color: #333333">);</span>
          <span style="color: #888888">//tokencheck = findViewById(R.id.token_check);</span>
      <span style="color: #333333">}</span>
      <span style="color: #888888">//검증파트 2</span>
  <span style="color: #888888">//    public void Login_verification()</span>
  <span style="color: #888888">//    {</span>
  <span style="color: #888888">//        SharedPreferences sharedPreferences = getSharedPreferences(&quot;MyPref&quot;, MODE_PRIVATE); //안드로이드 저장소에서 token정보 받아오기</span>
  <span style="color: #888888">//        String token = sharedPreferences.getString(&quot;token&quot;, &quot;&quot;); // 토큰정보를 변수에 넣기</span>
  <span style="color: #888888">//        if (!token.isEmpty())</span>
  <span style="color: #888888">//        {</span>
  <span style="color: #888888">//            //토큰이 비어있지 않을 때에만 서버로 전송</span>
  <span style="color: #888888">//            Toast.makeText(getApplicationContext(), &quot;검증 체크 버튼 누름&quot;, Toast.LENGTH_SHORT).show();//작동 잘함</span>
  <span style="color: #888888">//            //testView.setText(token);</span>
  <span style="color: #888888">//            String url = &quot;http://raphab-test1.p-e.kr:8090/verify-token&quot;;</span>
  <span style="color: #888888">//            // JSON형식으로 데이터 통신을 진행합니다!</span>
  <span style="color: #888888">//            JSONObject token_send = new JSONObject();</span>
  <span style="color: #888888">//            try</span>
  <span style="color: #888888">//            {</span>
  <span style="color: #888888">//                //토큰을 json형태로 변환</span>
  <span style="color: #888888">//                token_send.put(&quot;token&quot;, token);</span>
  <span style="color: #888888">//                String jsonString = token_send.toString();</span>
  <span style="color: #888888">//</span>
  <span style="color: #888888">//                //전송</span>
  <span style="color: #888888">//                final RequestQueue requestQueue = Volley.newRequestQueue(getApplicationContext());</span>
  <span style="color: #888888">//                final JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(Request.Method.POST, url, token_send, new Response.Listener&lt;JSONObject&gt;()</span>
  <span style="color: #888888">//                {// json데이터 전송파트  //데이터 응답파트</span>
  <span style="color: #888888">//                    @Override</span>
  <span style="color: #888888">//                    public void onResponse(JSONObject response)</span>
  <span style="color: #888888">//                    {</span>
  <span style="color: #888888">//                        try</span>
  <span style="color: #888888">//                        {</span>
  <span style="color: #888888">//                            String token_verification = response.getString(&quot;verification&quot;);</span>
  <span style="color: #888888">//                            if (token_verification.equals(&quot;success&quot;))</span>
  <span style="color: #888888">//                            {</span>
  <span style="color: #888888">//                                // 토큰 검증에 성공한 경우의 처리</span>
  <span style="color: #888888">//                                Toast.makeText(getApplicationContext(), &quot;토큰검증 성공&quot;, Toast.LENGTH_SHORT).show();</span>
  <span style="color: #888888">//                            }</span>
  <span style="color: #888888">//                            else</span>
  <span style="color: #888888">//                            {</span>
  <span style="color: #888888">//                                Toast.makeText(getApplicationContext(), &quot;토큰검증 실패&quot;, Toast.LENGTH_SHORT).show();</span>
  <span style="color: #888888">//                                // 토큰 검증에 실패한 경우의 처리</span>
  <span style="color: #888888">//                            }</span>
  <span style="color: #888888">//                        }</span>
  <span style="color: #888888">//                        catch (JSONException e)</span>
  <span style="color: #888888">//                        {</span>
  <span style="color: #888888">//                            e.printStackTrace();</span>
  <span style="color: #888888">//                        }</span>
  <span style="color: #888888">//                    }</span>
  <span style="color: #888888">//                }</span>
  <span style="color: #888888">//                , new Response.ErrorListener()</span>
  <span style="color: #888888">//                {</span>
  <span style="color: #888888">//                    @Override</span>
  <span style="color: #888888">//                    public void onErrorResponse(VolleyError error)</span>
  <span style="color: #888888">//                    {</span>
  <span style="color: #888888">//                        error.printStackTrace();</span>
  <span style="color: #888888">//                    }</span>
  <span style="color: #888888">//                });</span>
  <span style="color: #888888">//                jsonObjectRequest.setRetryPolicy(new DefaultRetryPolicy(DefaultRetryPolicy.DEFAULT_TIMEOUT_MS, DefaultRetryPolicy.DEFAULT_MAX_RETRIES, DefaultRetryPolicy.DEFAULT_BACKOFF_MULT));</span>
  <span style="color: #888888">//                requestQueue.add(jsonObjectRequest);</span>
  <span style="color: #888888">//            }</span>
  <span style="color: #888888">//            catch (JSONException e)</span>
  <span style="color: #888888">//            {</span>
  <span style="color: #888888">//                e.printStackTrace();</span>
  <span style="color: #888888">//            }</span>
  <span style="color: #888888">//        }</span>
  <span style="color: #888888">//        else</span>
  <span style="color: #888888">//        {</span>
  <span style="color: #888888">//            //토큰이 비어있을 때에는 처리하지 않음 또는 토큰이 없음을 알리는 메시지 출력</span>
  <span style="color: #888888">//            Toast.makeText(getApplicationContext(), &quot;토큰이 없습니다.&quot;, Toast.LENGTH_SHORT).show();</span>
  <span style="color: #888888">//        }</span>
  <span style="color: #888888">//    }</span>
  
      <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">requestLogin</span><span style="color: #333333">(</span>String ID<span style="color: #333333">,</span> String PW<span style="color: #333333">)</span>
      <span style="color: #333333">{</span>
          String url <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;http://raphab-test1.p-e.kr:8090/login&quot;</span><span style="color: #333333">;</span><span style="color: #888888">//엔드포인트 지정 login이라는</span>
  
          <span style="color: #888888">// JSON형식으로 데이터 통신을 진행합니다!</span>
          JSONObject testjson <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JSONObject<span style="color: #333333">();</span>
          <span style="color: #008800; font-weight: bold">try</span>
          <span style="color: #333333">{</span>
              <span style="color: #888888">// 입력해둔 edittext의 id와 pw값을 받아와 put해줍니다 : 데이터를 json형식으로 바꿔 넣어주었습니다.</span>
              testjson<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;id&quot;</span><span style="color: #333333">,</span> ID<span style="color: #333333">);</span>
              testjson<span style="color: #333333">.</span><span style="color: #0000CC">put</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;password&quot;</span><span style="color: #333333">,</span> PW<span style="color: #333333">);</span>
  
              <span style="color: #888888">// 이제 전송해볼까요?</span>
              <span style="color: #008800; font-weight: bold">final</span> RequestQueue requestQueue <span style="color: #333333">=</span> Volley<span style="color: #333333">.</span><span style="color: #0000CC">newRequestQueue</span><span style="color: #333333">(</span>Login<span style="color: #333333">.</span><span style="color: #0000CC">this</span><span style="color: #333333">);</span>
              <span style="color: #008800; font-weight: bold">final</span> JsonObjectRequest jsonObjectRequest <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> JsonObjectRequest<span style="color: #333333">(</span>Request<span style="color: #333333">.</span><span style="color: #0000CC">Method</span><span style="color: #333333">.</span><span style="color: #0000CC">POST</span><span style="color: #333333">,</span> url<span style="color: #333333">,</span> testjson<span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">Listener</span><span style="color: #333333">&lt;</span>JSONObject<span style="color: #333333">&gt;()</span>
              <span style="color: #333333">{</span>
  
                  <span style="color: #888888">// 데이터 전달을 끝내고 이제 그 응답을 받을 차례입니다.</span>
                  <span style="color: #555555; font-weight: bold">@Override</span>
                  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onResponse</span><span style="color: #333333">(</span>JSONObject response<span style="color: #333333">)</span>
                  <span style="color: #333333">{</span>
                      <span style="color: #008800; font-weight: bold">try</span>
                      <span style="color: #333333">{</span>
                          <span style="color: #888888">// 서버로부터 받은 json형식의 응답을 받아</span>
                          <span style="color: #888888">//String resultId = response.getString(&quot;approve_id&quot;);</span>
                          <span style="color: #888888">//String resultPassword = response.getString(&quot;approve_pw&quot;);</span>
  
                          String  login_success_check <span style="color: #333333">=</span> response<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;login_success&quot;</span><span style="color: #333333">);</span>
                          <span style="color: #008800; font-weight: bold">if</span><span style="color: #333333">(</span>login_success_check<span style="color: #333333">.</span><span style="color: #0000CC">equals</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;true&quot;</span><span style="color: #333333">))</span>
                          <span style="color: #333333">{</span>
                              String token <span style="color: #333333">=</span> response<span style="color: #333333">.</span><span style="color: #0000CC">getString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;token&quot;</span><span style="color: #333333">);</span> <span style="color: #888888">// 전체 토큰을 가져옴</span>
                              Toast<span style="color: #333333">.</span><span style="color: #0000CC">makeText</span><span style="color: #333333">(</span>getApplicationContext<span style="color: #333333">(),</span> token<span style="color: #333333">,</span> Toast<span style="color: #333333">.</span><span style="color: #0000CC">LENGTH_SHORT</span><span style="color: #333333">).</span><span style="color: #0000CC">show</span><span style="color: #333333">();</span>
                              testView<span style="color: #333333">.</span><span style="color: #0000CC">setText</span><span style="color: #333333">(</span>login_success_check<span style="color: #333333">);</span>
  
                              <span style="color: #888888">// 토큰을 SharedPreferences에 저장</span>
                              SharedPreferences sharedPreferences <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPref&quot;</span><span style="color: #333333">,</span> Context<span style="color: #333333">.</span><span style="color: #0000CC">MODE_PRIVATE</span><span style="color: #333333">);</span> <span style="color: #888888">//Mypref 이름의 기본모드 설정</span>
                              SharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">Editor</span> editor <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">edit</span><span style="color: #333333">();</span> <span style="color: #888888">//SharedPreferences를 제어할 editor를 선언</span>
                              editor<span style="color: #333333">.</span><span style="color: #0000CC">putString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;token&quot;</span><span style="color: #333333">,</span> token<span style="color: #333333">);</span><span style="color: #888888">//KEY,VALUE 형식으로 저장</span>
                              editor<span style="color: #333333">.</span><span style="color: #0000CC">commit</span><span style="color: #333333">();</span> <span style="color: #888888">// 최종 커밋</span>
                          <span style="color: #333333">}</span>
                          <span style="color: #008800; font-weight: bold">else</span>
                          <span style="color: #333333">{</span>
                              testView<span style="color: #333333">.</span><span style="color: #0000CC">setText</span><span style="color: #333333">(</span>login_success_check<span style="color: #333333">);</span>
                          <span style="color: #333333">}</span>
                      <span style="color: #333333">}</span>
                      <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span>
                      <span style="color: #333333">{</span>
                          e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
                      <span style="color: #333333">}</span>
                  <span style="color: #333333">}</span>
                  <span style="color: #888888">// 서버로 데이터 전달 및 응답 받기에 실패한 경우 아래 코드가 실행됩니다.</span>
              <span style="color: #333333">}</span>
              <span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">new</span> Response<span style="color: #333333">.</span><span style="color: #0000CC">ErrorListener</span><span style="color: #333333">()</span>
              <span style="color: #333333">{</span>
                  <span style="color: #555555; font-weight: bold">@Override</span>
                  <span style="color: #008800; font-weight: bold">public</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">onErrorResponse</span><span style="color: #333333">(</span>VolleyError error<span style="color: #333333">)</span> <span style="color: #333333">{</span>
                      error<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
                  <span style="color: #333333">}</span>
              <span style="color: #333333">});</span>
              jsonObjectRequest<span style="color: #333333">.</span><span style="color: #0000CC">setRetryPolicy</span><span style="color: #333333">(</span><span style="color: #008800; font-weight: bold">new</span> DefaultRetryPolicy<span style="color: #333333">(</span>DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_TIMEOUT_MS</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_MAX_RETRIES</span><span style="color: #333333">,</span> DefaultRetryPolicy<span style="color: #333333">.</span><span style="color: #0000CC">DEFAULT_BACKOFF_MULT</span><span style="color: #333333">));</span>
              requestQueue<span style="color: #333333">.</span><span style="color: #0000CC">add</span><span style="color: #333333">(</span>jsonObjectRequest<span style="color: #333333">);</span>
  
          <span style="color: #333333">}</span>
          <span style="color: #008800; font-weight: bold">catch</span> <span style="color: #333333">(</span>JSONException e<span style="color: #333333">)</span>
          <span style="color: #333333">{</span>
              e<span style="color: #333333">.</span><span style="color: #0000CC">printStackTrace</span><span style="color: #333333">();</span>
          <span style="color: #333333">}</span>
      <span style="color: #333333">}</span>
      <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">saveIDInfoToSharedPreferences</span><span style="color: #333333">(</span> String id<span style="color: #333333">)</span> <span style="color: #333333">{</span>
          SharedPreferences sharedPreferences <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPref&quot;</span><span style="color: #333333">,</span> Context<span style="color: #333333">.</span><span style="color: #0000CC">MODE_PRIVATE</span><span style="color: #333333">);</span>
          SharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">Editor</span> editor <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">edit</span><span style="color: #333333">();</span>
          editor<span style="color: #333333">.</span><span style="color: #0000CC">putString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;saved_id&quot;</span><span style="color: #333333">,</span> id<span style="color: #333333">);</span>
          editor<span style="color: #333333">.</span><span style="color: #0000CC">apply</span><span style="color: #333333">();</span>
      <span style="color: #333333">}</span>
      <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">saveLoginInfoToSharedPreferences</span><span style="color: #333333">(</span> String pw<span style="color: #333333">)</span> <span style="color: #333333">{</span>
          SharedPreferences sharedPreferences <span style="color: #333333">=</span> getSharedPreferences<span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;MyPref&quot;</span><span style="color: #333333">,</span> Context<span style="color: #333333">.</span><span style="color: #0000CC">MODE_PRIVATE</span><span style="color: #333333">);</span>
          SharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">Editor</span> editor <span style="color: #333333">=</span> sharedPreferences<span style="color: #333333">.</span><span style="color: #0000CC">edit</span><span style="color: #333333">();</span>
          editor<span style="color: #333333">.</span><span style="color: #0000CC">putString</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;saved_pw&quot;</span><span style="color: #333333">,</span> pw<span style="color: #333333">);</span>
          editor<span style="color: #333333">.</span><span style="color: #0000CC">putBoolean</span><span style="color: #333333">(</span><span style="background-color: #fff0f0">&quot;auto_login&quot;</span><span style="color: #333333">,</span> <span style="color: #008800; font-weight: bold">true</span><span style="color: #333333">);</span>
          editor<span style="color: #333333">.</span><span style="color: #0000CC">apply</span><span style="color: #333333">();</span>
      <span style="color: #333333">}</span>
  <span style="color: #333333">}</span>
  </pre></td></tr></table></div>
  
</body>
</html>